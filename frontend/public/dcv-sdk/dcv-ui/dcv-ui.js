import e from"dcv";import t,{useEffect as n,memo as r,useRef as o,useState as i,useCallback as a,useMemo as s}from"react";import c from"prop-types";import{Popover as l,StatusIndicator as d,Button as u,Modal as m,Box as p,SpaceBetween as h,Textarea as f,Grid as g,Link as b,Tabs as v,RadioGroup as y,Alert as w,Select as E,ColumnLayout as S,Toggle as x,ButtonDropdown as k,Header as M,LineChart as O,Pagination as C,BreadcrumbGroup as R,Table as I,Icon as T,Input as F,Container as D,Badge as A,ProgressBar as B,Spinner as N}from"@cloudscape-design/components";import{applyMode as _,Mode as P,applyDensity as $,Density as L}from"@cloudscape-design/global-styles";import{colorChartsPaletteCategorical1 as j,colorChartsPaletteCategorical2 as z,colorChartsPaletteCategorical3 as W,colorBackgroundContainerHeader as U,colorBorderDividerDefault as V,colorBackgroundContainerContent as q}from"@cloudscape-design/design-tokens";import H from"@babel/runtime/helpers/extends";import G from"react-dom";var Q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},K={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new o(r,i||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=new Array(i);o<i;o++)a[o]=r[o].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,o,i,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,l,d=this._events[s],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,o),!0;case 5:return d.fn.call(d.context,t,r,o,i),!0;case 6:return d.fn.call(d.context,t,r,o,i,a),!0}for(l=1,c=new Array(u-1);l<u;l++)c[l-1]=arguments[l];d.fn.apply(d.context,c)}else{var m,p=d.length;for(l=0;l<p;l++)switch(d[l].once&&this.removeListener(e,d[l].fn,void 0,!0),u){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,t);break;case 3:d[l].fn.call(d[l].context,t,r);break;case 4:d[l].fn.call(d[l].context,t,r,o);break;default:if(!c)for(m=1,c=new Array(u-1);m<u;m++)c[m-1]=arguments[m];d[l].fn.apply(d[l].context,c)}}return!0},s.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||o&&!s.once||r&&s.context!==r||a(this,i);else{for(var c=0,l=[],d=s.length;c<d;c++)(s[c].fn!==t||o&&!s[c].once||r&&s[c].context!==r)&&l.push(s[c]);l.length?this._events[i]=1===l.length?l[0]:l:a(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(K);const Y=new(0,K.exports),Z={on:(e,t)=>Y.on(e,t),once:(e,t)=>Y.once(e,t),off:(e,t)=>Y.off(e,t),emit:(e,...t)=>Y.emit(e,...t)};Object.freeze(Z);var J,X,ee,te={exports:{}};X=Q,ee=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],o={},i=null;function a(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(){for(var n=this.getLevel(),o=0;o<r.length;o++){var i=r[o];this[i]=o<n?e:this.methodFactory(i,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function l(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function d(r,o,i){return function(r){return"debug"===r&&(r="log"),typeof console!==t&&("trace"===r&&n?s:void 0!==console[r]?a(console,r):void 0!==console.log?a(console,"log"):e)}(r)||l.apply(this,arguments)}function u(e,n){var a,s,l,u=this,m="loglevel";function p(){var e;if(typeof window!==t&&m){try{e=window.localStorage[m]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,r=encodeURIComponent(m),o=n.indexOf(r+"=");-1!==o&&(e=/^([^;]+)/.exec(n.slice(o+r.length+1))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}}function h(e){var t=e;if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=u.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?m+=":"+e:"symbol"==typeof e&&(m=void 0),u.name=e,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=n||d,u.getLevel=function(){return null!=l?l:null!=s?s:a},u.setLevel=function(e,n){return l=h(e),!1!==n&&function(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&m){try{return void(window.localStorage[m]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(m)+"="+n+";"}catch(e){}}}(l),c.call(u)},u.setDefaultLevel=function(e){s=h(e),p()||u.setLevel(e,!1)},u.resetLevel=function(){l=null,function(){if(typeof window!==t&&m){try{window.localStorage.removeItem(m)}catch(e){}try{window.document.cookie=encodeURIComponent(m)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),c.call(u)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)},u.rebuild=function(){if(i!==u&&(a=h(i.getLevel())),c.call(u),i===u)for(var e in o)o[e].rebuild()},a=h(i?i.getLevel():"WARN");var f=p();null!=f&&(l=h(f)),c.call(u)}(i=new u).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=o[e];return t||(t=o[e]=new u(e,i.methodFactory)),t};var m=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=m),i},i.getLoggers=function(){return o},i.default=i,i},(J=te).exports?J.exports=ee():X.log=ee();var ne=te.exports;const re=ne.getLogger("DCV-web-sdk-UI");class oe{constructor(e){this.name=e,this.dateObject=new Date}trace(e){const t=this.dateObject;t.setTime(Date.now()),re.trace(`${t.toISOString()} - [UI][${this.name}] TRACE ${e}`)}debug(e){const t=this.dateObject;t.setTime(Date.now()),re.debug(`${t.toISOString()} - [UI][${this.name}] DEBUG ${e}`)}info(e){const t=this.dateObject;t.setTime(Date.now()),re.info(`${t.toISOString()} - [UI][${this.name}] INFO ${e}`)}warn(e){const t=this.dateObject;t.setTime(Date.now()),re.warn(`${t.toISOString()} - [UI][${this.name}] WARN ${e}`)}error(e){const t=this.dateObject;t.setTime(Date.now()),re.error(`${t.toISOString()} - [UI][${this.name}] ERROR ${e}`)}}function ie(e){return new oe(e)}function ae(e){return"function"==typeof e}function se(e){return null==e}function ce(e){return!se(e)&&"object"==typeof e&&!Array.isArray(e)}function le(e){return e.charAt(0).toUpperCase()+e.slice(1)}function de(e,n,r){const o=n||"20px",i=r||"0";return t.createElement("div",{style:{padding:`${i} ${o}`}},e)}function ue(e){return(e||window).document.documentElement.clientHeight}function me(e){return-1!==["available","attached","streaming"].indexOf(e)}const pe={label:"Auto-hide toolbar",description:"Automatically hide the toolbar and display it only moving the mouse to the top border."},he={label:"Auto-hide toolbar only in full screen",description:"Fix the bar on the top only in windowed mode."},fe={label:"Always display the toolbar",description:"Fix the bar on the top."},ge="Light mode",be="Dark mode",ve="System default",ye={label:"Best responsiveness",description:"Provide most fluid experience.",minQuality:20,maxQuality:90},we={label:"Best quality",description:"Provide best image quality.",minQuality:70,maxQuality:90},Ee="adaptive",Se="current",xe=[{width:1920,height:1080},{width:1440,height:900},{width:1024,height:768},{width:800,height:600}];let ke;function Me(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)")&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener&&window.matchMedia("(prefers-color-scheme: dark)").removeEventListener}function Oe(){return ke}Me()&&(ke=window.matchMedia("(prefers-color-scheme: dark)"));const Ce=(e,t)=>{_(e.matches?P.Dark:P.Light,t)},Re=(e,t)=>{switch(e){case ve:ke&&Ce(ke,t);break;case ge:_(P.Light,t);break;case be:_(P.Dark,t)}},Ie=ie("Settings");let Te=null;try{Te=window.localStorage}catch(e){Ie.warn(`Settings persistence disabled. Error accessing local storage: ${e.message}`)}const Fe={sessionId:"",authToken:"",extensionData:"",promptReconnect:!0,logLevel:"info",wss:!0,enabledChannels:[],customChannels:[],displayCodecs:[],enableQU:!0,minQuality:30,maxQuality:0,maxDisplayWidth:0,maxDisplayHeight:0,minDisplayWidth:640,minDisplayHeight:480,debugLayer:!1,enableGraphicsDebugLayer:!1,clientHiDpiScaling:!0,enableHighPixelDensity:!1,enableWebCodecs:!0,losslessColorspace:"rgb",dynamicResolution:!0,enableShortcutEditor:!1,scaleToFit:!1,volume:100,microphone:!1,webcam:!1,macOptionToAlt:!0,macCommandToControl:!1,appearanceMode:Me()?ve:ge,toolbarBehavior:he.label,displayQuality:ye.label,metricsEnabled:!1,selectedResolution:Ee,selectedWebcamId:null,highColorAccuracy:!1,forceKeyboardCombinations:!1,timezoneRedirectionEnabled:!1};function De(){Te?.setItem("dcv-settings",JSON.stringify(Fe))}let Ae,Be,Ne={},_e=[];function Pe(e){Be.queryFeature(e).then((t=>{ae(Ne[e])&&Ne[e](t)})).catch((t=>{Ae.info(`Query for ${e} denied with message: ${t.message}`)}))}function $e(e){e.length>0&&function(e){e.forEach((e=>{-1!==Object.keys(Ne).indexOf(e)?Pe(e):(_e.push(e),Ae&&Ae.info(`No callback for feature ${e} adding to pending.`))}))}(e)}function Le(e,t){e&&ae(t)?(Ne[e]=t,Ae.info(`Added feature listener for: ${e}`),Ae.debug(`Callbacks ${Object.keys(Ne)}`),Ae.debug(`Pending updates ${_e}`),-1!==_e.indexOf(e)&&(Pe(e),_e.splice(_e.indexOf(e),1))):Ae.warn("Wrong parameters for addFeatureListener")}const je={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},ze={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},We={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Ue={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Ve={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class qe{static getFirstMatch(e,t){const n=t.match(e);return n&&n.length>0&&n[1]||""}static getSecondMatch(e,t){const n=t.match(e);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(e,t,n){if(e.test(t))return n}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map((e=>parseInt(e,10)||0));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map((e=>parseInt(e,10)||0));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,n=!1){const r=qe.getVersionPrecision(e),o=qe.getVersionPrecision(t);let i=Math.max(r,o),a=0;const s=qe.map([e,t],(e=>{const t=i-qe.getVersionPrecision(e),n=e+new Array(t+1).join(".0");return qe.map(n.split("."),(e=>new Array(20-e.length).join("0")+e)).reverse()}));for(n&&(a=i-Math.min(r,o)),i-=1;i>=a;){if(s[0][i]>s[1][i])return 1;if(s[0][i]===s[1][i]){if(i===a)return 0;i-=1}else if(s[0][i]<s[1][i])return-1}}static map(e,t){const n=[];let r;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n}static find(e,t){let n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){const r=e[n];if(t(r,n))return r}}static assign(e,...t){const n=e;let r,o;if(Object.assign)return Object.assign(e,...t);for(r=0,o=t.length;r<o;r+=1){const e=t[r];if("object"==typeof e&&null!==e){Object.keys(e).forEach((t=>{n[t]=e[t]}))}}return e}static getBrowserAlias(e){return je[e]}static getBrowserTypeByAlias(e){return ze[e]||""}}const He=/version\/(\d+(\.?_?\d+)+)/i,Ge=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},n=qe.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||qe.getFirstMatch(He,e);return n&&(t.version=n),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},n=qe.getFirstMatch(He,e)||qe.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},n=qe.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||qe.getFirstMatch(He,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},n=qe.getFirstMatch(He,e)||qe.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},n=qe.getFirstMatch(He,e)||qe.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},n=qe.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||qe.getFirstMatch(He,e);return n&&(t.version=n),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},n=qe.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||qe.getFirstMatch(He,e);return n&&(t.version=n),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},n=qe.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||qe.getFirstMatch(He,e);return n&&(t.version=n),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},n=qe.getFirstMatch(He,e)||qe.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},n=qe.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||qe.getFirstMatch(He,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},n=qe.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||qe.getFirstMatch(He,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},n=qe.getFirstMatch(He,e)||qe.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},n=qe.getFirstMatch(He,e)||qe.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},n=qe.getFirstMatch(He,e)||qe.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},n=qe.getFirstMatch(He,e)||qe.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},n=qe.getFirstMatch(He,e)||qe.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},n=qe.getFirstMatch(He,e)||qe.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},n=qe.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||qe.getFirstMatch(He,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=qe.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||qe.getFirstMatch(He,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},n=qe.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},n=qe.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},n=qe.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},n=qe.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},n=qe.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},n=qe.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},n=qe.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},n=qe.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},n=qe.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},n=qe.getFirstMatch(He,e)||qe.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},n=qe.getFirstMatch(He,e)||qe.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},n=qe.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},n=qe.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||qe.getFirstMatch(He,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},n=qe.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||qe.getFirstMatch(He,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},n=qe.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},n=qe.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},n=qe.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},n=qe.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||qe.getFirstMatch(He,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},n=qe.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},n=qe.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t={name:"Android Browser"},n=qe.getFirstMatch(He,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},n=qe.getFirstMatch(He,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},n=qe.getFirstMatch(He,e);return n&&(t.version=n),t}},{test:[/.*/i],describe(e){const t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:qe.getFirstMatch(t,e),version:qe.getSecondMatch(t,e)}}}];var Qe=[{test:[/Roku\/DVP/],describe(e){const t=qe.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:Ue.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=qe.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:Ue.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=qe.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=qe.getWindowsVersionName(t);return{name:Ue.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:Ue.iOS},n=qe.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe(e){const t=qe.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=qe.getMacOSVersionName(t),r={name:Ue.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=qe.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:Ue.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t=qe.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=qe.getAndroidVersionName(t),r={name:Ue.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=qe.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:Ue.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=qe.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||qe.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||qe.getFirstMatch(/\bbb(\d+)/i,e);return{name:Ue.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=qe.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:Ue.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=qe.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:Ue.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:Ue.Linux})},{test:[/CrOS/],describe:()=>({name:Ue.ChromeOS})},{test:[/PlayStation 4/],describe(e){const t=qe.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:Ue.PlayStation4,version:t}}}],Ke=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(e){const t=qe.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:We.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:We.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:We.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:We.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:We.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:We.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:We.tablet})},{test(e){const t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe(e){const t=qe.getFirstMatch(/(ipod|iphone)/i,e);return{type:We.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:We.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:We.mobile})},{test:e=>"blackberry"===e.getBrowserName(!0),describe:()=>({type:We.mobile,vendor:"BlackBerry"})},{test:e=>"bada"===e.getBrowserName(!0),describe:()=>({type:We.mobile})},{test:e=>"windows phone"===e.getBrowserName(),describe:()=>({type:We.mobile,vendor:"Microsoft"})},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:()=>({type:We.tablet})},{test:e=>"android"===e.getOSName(!0),describe:()=>({type:We.mobile})},{test:e=>"macos"===e.getOSName(!0),describe:()=>({type:We.desktop,vendor:"Apple"})},{test:e=>"windows"===e.getOSName(!0),describe:()=>({type:We.desktop})},{test:e=>"linux"===e.getOSName(!0),describe:()=>({type:We.desktop})},{test:e=>"playstation 4"===e.getOSName(!0),describe:()=>({type:We.tv})},{test:e=>"roku"===e.getOSName(!0),describe:()=>({type:We.tv})}],Ye=[{test:e=>"microsoft edge"===e.getBrowserName(!0),describe(e){if(/\sedg\//i.test(e))return{name:Ve.Blink};const t=qe.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:Ve.EdgeHTML,version:t}}},{test:[/trident/i],describe(e){const t={name:Ve.Trident},n=qe.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:e=>e.test(/presto/i),describe(e){const t={name:Ve.Presto},n=qe.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe(e){const t={name:Ve.Gecko},n=qe.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:Ve.Blink})},{test:[/(apple)?webkit/i],describe(e){const t={name:Ve.WebKit},n=qe.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];class Ze{constructor(e,t=!1){if(null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=qe.find(Ge,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=qe.find(Qe,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=qe.find(Ke,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=qe.find(Ye,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return qe.assign({},this.parsedResult)}satisfies(e){const t={};let n=0;const r={};let o=0;if(Object.keys(e).forEach((i=>{const a=e[i];"string"==typeof a?(r[i]=a,o+=1):"object"==typeof a&&(t[i]=a,n+=1)})),n>0){const e=Object.keys(t),n=qe.find(e,(e=>this.isOS(e)));if(n){const e=this.satisfies(t[n]);if(void 0!==e)return e}const r=qe.find(e,(e=>this.isPlatform(e)));if(r){const e=this.satisfies(t[r]);if(void 0!==e)return e}}if(o>0){const e=Object.keys(r),t=qe.find(e,(e=>this.isBrowser(e,!0)));if(void 0!==t)return this.compareVersion(r[t])}}isBrowser(e,t=!1){const n=this.getBrowserName().toLowerCase();let r=e.toLowerCase();const o=qe.getBrowserTypeByAlias(r);return t&&o&&(r=o.toLowerCase()),r===n}compareVersion(e){let t=[0],n=e,r=!1;const o=this.getBrowserVersion();if("string"==typeof o)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(qe.compareVersions(o,n,r))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some((e=>this.is(e)))}}
/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */const Je=class{static getParser(e,t=!1){if("string"!=typeof e)throw new Error("UserAgent should be a string");return new Ze(e,t)}static parse(e){return new Ze(e).getResult()}static get BROWSER_MAP(){return ze}static get ENGINE_MAP(){return Ve}static get OS_MAP(){return Ue}static get PLATFORMS_MAP(){return We}}.getParser(window.navigator.userAgent),Xe="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,et=Je.getOSName(!0);function tt(){return!("tablet"!==Je.getPlatformType(!0)&&!nt())}function nt(){return!!Je.satisfies({macos:{safari:">=13"}})&&Xe}function rt(){return Je}function ot(){return Je.isBrowser("safari",!0)}function it(){return"mobile"===Je.getPlatformType(!0)}function at(){return"macos"===et}function st(){return"ios"===et}const ct=at()||st()?"⌘":"CTRL",lt=`Press [${ct}+C] to copy content from remote clipboard.`,dt=`Press [${ct}+V] to paste content to remote clipboard.`,ut="Clipboard synced",mt="success",pt=5e3,ht=ie("Clipboard");let ft="",gt="",bt=!1;function vt({connection:e,copyEnabled:r,pasteEnabled:o,currentWindow:i}){const[a,s]=t.useState(!1),[c,g]=t.useState(""),[b,v]=t.useState({}),[y,w]=t.useState({}),E=()=>{s(!1),e.captureClipboardEvents(!1,i)},S=(e,t)=>{a?(v({status:e,message:t}),i.document.getElementById("modal-popover-trigger").click()):(w({status:e,message:t}),i.document.getElementById("icon-popover-trigger").click())},x=()=>{bt||(S(mt,ut),("string"==typeof ft||ft instanceof String)&&g(ft))},k=()=>{bt||(S(mt,ut),("string"==typeof gt||gt instanceof String)&&g(gt))},M=()=>{S("error","The clipboard data is too large to be transferred"),bt=!0},O=e=>{switch(ht.info(`Received clipboard event ${e.name}`),e.name){case"established":break;case"copy":case"autoCopyDone":x();break;case"paste":case"autoPasteDone":k();break;case"dataSizeAlert":M();break;case"remoteError":"dataSizeAlert"===e.error&&M();break;case"newDataAvailable":e.autoCopy||S("info","Use the clipboard to copy data locally or remotely."),ft=e.clipboardData["text/plain"],bt=!1;break;case"pasteAvailableData":gt=e.clipboardData,bt=!1;break;default:ht.info("Unknown clipboard event.")}};return n((()=>(Z.on("clipboard",O),()=>{Z.off("clipboard",O)})),[i,a]),t.createElement("div",null,t.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"start"}},t.createElement("div",{style:{height:0}},t.createElement(l,{dismissButton:!1,position:"bottom",size:"large",triggerType:"custom",content:t.createElement(d,{type:y.status},y.message)},t.createElement("div",{id:"icon-popover-trigger"}))),t.createElement("div",{title:"Clipboard"},t.createElement(u,{iconName:"copy",variant:"icon",onClick:()=>{s(!0),g(""),e.captureClipboardEvents(!0,i)}}))),t.createElement(m,{onDismiss:E,visible:a,size:"large",header:"Copy and paste",footer:t.createElement(p,{float:"right"},t.createElement(u,{variant:"primary",onClick:E},"Done")),modalRoot:i.document.body},t.createElement(h,{size:"xl"},t.createElement(p,null,r&&t.createElement(p,{variant:"p"},lt),o&&t.createElement(p,{variant:"p"},dt)),t.createElement(p,{variant:"p",margin:{bottom:"xs"}},"Content preview")),t.createElement("div",{style:{margin:"auto",width:"1px",height:0}},t.createElement(l,{dismissButton:!1,position:"top",size:"large",triggerType:"custom",content:t.createElement(d,{type:b.status},b.message)},t.createElement("div",{id:"modal-popover-trigger",style:{marginTop:"19.5px"}}))),t.createElement(f,{controlId:"textarea",value:(C=c,C.substring(0,pt).replace(/\0/g,"").concat(C.length>pt?" ...":"")),readOnly:!0,rows:10})));var C}vt.propTypes={connection:c.object,copyEnabled:c.bool,pasteEnabled:c.bool,currentWindow:c.object};var yt=r(vt),wt=function(e){return e&&e.Math==Math&&e},Et=wt("object"==typeof globalThis&&globalThis)||wt("object"==typeof window&&window)||wt("object"==typeof self&&self)||wt("object"==typeof Q&&Q)||function(){return this}()||Function("return this")(),St={},xt=function(e){try{return!!e()}catch(e){return!0}},kt=!xt((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Mt=!xt((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),Ot=Mt,Ct=Function.prototype.call,Rt=Ot?Ct.bind(Ct):function(){return Ct.apply(Ct,arguments)},It={},Tt={}.propertyIsEnumerable,Ft=Object.getOwnPropertyDescriptor,Dt=Ft&&!Tt.call({1:2},1);It.f=Dt?function(e){var t=Ft(this,e);return!!t&&t.enumerable}:Tt;var At,Bt,Nt=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},_t=Mt,Pt=Function.prototype,$t=Pt.bind,Lt=Pt.call,jt=_t&&$t.bind(Lt,Lt),zt=_t?function(e){return e&&jt(e)}:function(e){return e&&function(){return Lt.apply(e,arguments)}},Wt=zt,Ut=Wt({}.toString),Vt=Wt("".slice),qt=function(e){return Vt(Ut(e),8,-1)},Ht=zt,Gt=xt,Qt=qt,Kt=Et.Object,Yt=Ht("".split),Zt=Gt((function(){return!Kt("z").propertyIsEnumerable(0)}))?function(e){return"String"==Qt(e)?Yt(e,""):Kt(e)}:Kt,Jt=Et.TypeError,Xt=function(e){if(null==e)throw Jt("Can't call method on "+e);return e},en=Zt,tn=Xt,nn=function(e){return en(tn(e))},rn=function(e){return"function"==typeof e},on=rn,an=function(e){return"object"==typeof e?null!==e:on(e)},sn=Et,cn=rn,ln=function(e,t){return arguments.length<2?(n=sn[e],cn(n)?n:void 0):sn[e]&&sn[e][t];var n},dn=zt({}.isPrototypeOf),un=Et,mn=ln("navigator","userAgent")||"",pn=un.process,hn=un.Deno,fn=pn&&pn.versions||hn&&hn.version,gn=fn&&fn.v8;gn&&(Bt=(At=gn.split("."))[0]>0&&At[0]<4?1:+(At[0]+At[1])),!Bt&&mn&&(!(At=mn.match(/Edge\/(\d+)/))||At[1]>=74)&&(At=mn.match(/Chrome\/(\d+)/))&&(Bt=+At[1]);var bn=Bt,vn=xt,yn=!!Object.getOwnPropertySymbols&&!vn((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&bn&&bn<41})),wn=yn&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,En=ln,Sn=rn,xn=dn,kn=wn,Mn=Et.Object,On=kn?function(e){return"symbol"==typeof e}:function(e){var t=En("Symbol");return Sn(t)&&xn(t.prototype,Mn(e))},Cn=Et.String,Rn=rn,In=function(e){try{return Cn(e)}catch(e){return"Object"}},Tn=Et.TypeError,Fn=function(e){if(Rn(e))return e;throw Tn(In(e)+" is not a function")},Dn=Rt,An=rn,Bn=an,Nn=Et.TypeError,_n={exports:{}},Pn=Et,$n=Object.defineProperty,Ln=function(e,t){try{$n(Pn,e,{value:t,configurable:!0,writable:!0})}catch(n){Pn[e]=t}return t},jn=Ln,zn="__core-js_shared__",Wn=Et[zn]||jn(zn,{}),Un=Wn;(_n.exports=function(e,t){return Un[e]||(Un[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.3",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var Vn=Xt,qn=Et.Object,Hn=function(e){return qn(Vn(e))},Gn=zt({}.hasOwnProperty),Qn=Object.hasOwn||function(e,t){return Gn(Hn(e),t)},Kn=zt,Yn=0,Zn=Math.random(),Jn=Kn(1..toString),Xn=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Jn(++Yn+Zn,36)},er=Et,tr=_n.exports,nr=Qn,rr=Xn,or=yn,ir=wn,ar=tr("wks"),sr=er.Symbol,cr=sr&&sr.for,lr=ir?sr:sr&&sr.withoutSetter||rr,dr=function(e){if(!nr(ar,e)||!or&&"string"!=typeof ar[e]){var t="Symbol."+e;or&&nr(sr,e)?ar[e]=sr[e]:ar[e]=ir&&cr?cr(t):lr(t)}return ar[e]},ur=Rt,mr=an,pr=On,hr=function(e,t){var n=e[t];return null==n?void 0:Fn(n)},fr=function(e,t){var n,r;if("string"===t&&An(n=e.toString)&&!Bn(r=Dn(n,e)))return r;if(An(n=e.valueOf)&&!Bn(r=Dn(n,e)))return r;if("string"!==t&&An(n=e.toString)&&!Bn(r=Dn(n,e)))return r;throw Nn("Can't convert object to primitive value")},gr=dr,br=Et.TypeError,vr=gr("toPrimitive"),yr=function(e,t){if(!mr(e)||pr(e))return e;var n,r=hr(e,vr);if(r){if(void 0===t&&(t="default"),n=ur(r,e,t),!mr(n)||pr(n))return n;throw br("Can't convert object to primitive value")}return void 0===t&&(t="number"),fr(e,t)},wr=On,Er=function(e){var t=yr(e,"string");return wr(t)?t:t+""},Sr=an,xr=Et.document,kr=Sr(xr)&&Sr(xr.createElement),Mr=function(e){return kr?xr.createElement(e):{}},Or=!kt&&!xt((function(){return 7!=Object.defineProperty(Mr("div"),"a",{get:function(){return 7}}).a})),Cr=kt,Rr=Rt,Ir=It,Tr=Nt,Fr=nn,Dr=Er,Ar=Qn,Br=Or,Nr=Object.getOwnPropertyDescriptor;St.f=Cr?Nr:function(e,t){if(e=Fr(e),t=Dr(t),Br)try{return Nr(e,t)}catch(e){}if(Ar(e,t))return Tr(!Rr(Ir.f,e,t),e[t])};var _r={},Pr=kt&&xt((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),$r=Et,Lr=an,jr=$r.String,zr=$r.TypeError,Wr=function(e){if(Lr(e))return e;throw zr(jr(e)+" is not an object")},Ur=kt,Vr=Or,qr=Pr,Hr=Wr,Gr=Er,Qr=Et.TypeError,Kr=Object.defineProperty,Yr=Object.getOwnPropertyDescriptor,Zr="enumerable",Jr="configurable",Xr="writable";_r.f=Ur?qr?function(e,t,n){if(Hr(e),t=Gr(t),Hr(n),"function"==typeof e&&"prototype"===t&&"value"in n&&Xr in n&&!n[Xr]){var r=Yr(e,t);r&&r[Xr]&&(e[t]=n.value,n={configurable:Jr in n?n[Jr]:r[Jr],enumerable:Zr in n?n[Zr]:r[Zr],writable:!1})}return Kr(e,t,n)}:Kr:function(e,t,n){if(Hr(e),t=Gr(t),Hr(n),Vr)try{return Kr(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Qr("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var eo=_r,to=Nt,no=kt?function(e,t,n){return eo.f(e,t,to(1,n))}:function(e,t,n){return e[t]=n,e},ro={exports:{}},oo=rn,io=Wn,ao=zt(Function.toString);oo(io.inspectSource)||(io.inspectSource=function(e){return ao(e)});var so,co,lo,uo=io.inspectSource,mo=rn,po=uo,ho=Et.WeakMap,fo=mo(ho)&&/native code/.test(po(ho)),go=_n.exports,bo=Xn,vo=go("keys"),yo={},wo=fo,Eo=Et,So=zt,xo=an,ko=no,Mo=Qn,Oo=Wn,Co=function(e){return vo[e]||(vo[e]=bo(e))},Ro=yo,Io="Object already initialized",To=Eo.TypeError,Fo=Eo.WeakMap;if(wo||Oo.state){var Do=Oo.state||(Oo.state=new Fo),Ao=So(Do.get),Bo=So(Do.has),No=So(Do.set);so=function(e,t){if(Bo(Do,e))throw new To(Io);return t.facade=e,No(Do,e,t),t},co=function(e){return Ao(Do,e)||{}},lo=function(e){return Bo(Do,e)}}else{var _o=Co("state");Ro[_o]=!0,so=function(e,t){if(Mo(e,_o))throw new To(Io);return t.facade=e,ko(e,_o,t),t},co=function(e){return Mo(e,_o)?e[_o]:{}},lo=function(e){return Mo(e,_o)}}var Po={set:so,get:co,has:lo,enforce:function(e){return lo(e)?co(e):so(e,{})},getterFor:function(e){return function(t){var n;if(!xo(t)||(n=co(t)).type!==e)throw To("Incompatible receiver, "+e+" required");return n}}},$o=kt,Lo=Qn,jo=Function.prototype,zo=$o&&Object.getOwnPropertyDescriptor,Wo=Lo(jo,"name"),Uo=Wo&&"something"===function(){}.name,Vo=Wo&&(!$o||$o&&zo(jo,"name").configurable),qo=Et,Ho=rn,Go=Qn,Qo=no,Ko=Ln,Yo=uo,Zo={EXISTS:Wo,PROPER:Uo,CONFIGURABLE:Vo}.CONFIGURABLE,Jo=Po.get,Xo=Po.enforce,ei=String(String).split("String");(ro.exports=function(e,t,n,r){var o,i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet,c=r&&void 0!==r.name?r.name:t;Ho(n)&&("Symbol("===String(c).slice(0,7)&&(c="["+String(c).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Go(n,"name")||Zo&&n.name!==c)&&Qo(n,"name",c),(o=Xo(n)).source||(o.source=ei.join("string"==typeof c?c:""))),e!==qo?(i?!s&&e[t]&&(a=!0):delete e[t],a?e[t]=n:Qo(e,t,n)):a?e[t]=n:Ko(t,n)})(Function.prototype,"toString",(function(){return Ho(this)&&Jo(this).source||Yo(this)}));var ti={},ni=Math.ceil,ri=Math.floor,oi=function(e){var t=+e;return t!=t||0===t?0:(t>0?ri:ni)(t)},ii=oi,ai=Math.max,si=Math.min,ci=oi,li=Math.min,di=function(e){return e>0?li(ci(e),9007199254740991):0},ui=nn,mi=function(e,t){var n=ii(e);return n<0?ai(n+t,0):si(n,t)},pi=function(e){return di(e.length)},hi=function(e){return function(t,n,r){var o,i=ui(t),a=pi(i),s=mi(r,a);if(e&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},fi={includes:hi(!0),indexOf:hi(!1)},gi=Qn,bi=nn,vi=fi.indexOf,yi=yo,wi=zt([].push),Ei=function(e,t){var n,r=bi(e),o=0,i=[];for(n in r)!gi(yi,n)&&gi(r,n)&&wi(i,n);for(;t.length>o;)gi(r,n=t[o++])&&(~vi(i,n)||wi(i,n));return i},Si=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype");ti.f=Object.getOwnPropertyNames||function(e){return Ei(e,Si)};var xi={};xi.f=Object.getOwnPropertySymbols;var ki=ln,Mi=ti,Oi=xi,Ci=Wr,Ri=zt([].concat),Ii=ki("Reflect","ownKeys")||function(e){var t=Mi.f(Ci(e)),n=Oi.f;return n?Ri(t,n(e)):t},Ti=Qn,Fi=Ii,Di=St,Ai=_r,Bi=xt,Ni=rn,_i=/#|\.prototype\./,Pi=function(e,t){var n=Li[$i(e)];return n==zi||n!=ji&&(Ni(t)?Bi(t):!!t)},$i=Pi.normalize=function(e){return String(e).replace(_i,".").toLowerCase()},Li=Pi.data={},ji=Pi.NATIVE="N",zi=Pi.POLYFILL="P",Wi=Pi,Ui=Et,Vi=St.f,qi=no,Hi=ro.exports,Gi=Ln,Qi=function(e,t,n){for(var r=Fi(t),o=Ai.f,i=Di.f,a=0;a<r.length;a++){var s=r[a];Ti(e,s)||n&&Ti(n,s)||o(e,s,i(t,s))}},Ki=Wi,Yi=dn,Zi=Et.TypeError,Ji=Et,Xi=rn,ea=Ji.String,ta=Ji.TypeError,na=zt,ra=Wr,oa=function(e){if("object"==typeof e||Xi(e))return e;throw ta("Can't set "+ea(e)+" as a prototype")},ia=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=na(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return ra(n),oa(r),t?e(n,r):n.__proto__=r,n}}():void 0),aa=rn,sa=an,ca=ia,la={};la[dr("toStringTag")]="z";var da=Et,ua="[object z]"===String(la),ma=rn,pa=qt,ha=dr("toStringTag"),fa=da.Object,ga="Arguments"==pa(function(){return arguments}()),ba=ua?pa:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=fa(e),ha))?n:ga?pa(t):"Object"==(r=pa(t))&&ma(t.callee)?"Arguments":r},va=ba,ya=Et.String,wa=function(e){if("Symbol"===va(e))throw TypeError("Cannot convert a Symbol value to a string");return ya(e)},Ea=zt("".replace),Sa=String(Error("zxcasd").stack),xa=/\n\s*at [^:]*:[^\n]*/,ka=xa.test(Sa),Ma=function(e,t){var n,r,o,i,a,s=e.target,c=e.global,l=e.stat;if(n=c?Ui:l?Ui[s]||Gi(s,{}):(Ui[s]||{}).prototype)for(r in t){if(i=t[r],o=e.noTargetGet?(a=Vi(n,r))&&a.value:n[r],!Ki(c?r:s+(l?".":"#")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;Qi(i,o)}(e.sham||o&&o.sham)&&qi(i,"sham",!0),Hi(n,r,i,e)}},Oa=ln,Ca=Nt,Ra=_r.f,Ia=Qn,Ta=function(e,t){if(Yi(t,e))return e;throw Zi("Incorrect invocation")},Fa=function(e,t,n){var r,o;return ca&&aa(r=t.constructor)&&r!==n&&sa(o=r.prototype)&&o!==n.prototype&&ca(e,o),e},Da=function(e,t){return void 0===e?arguments.length<2?"":t:wa(e)},Aa={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},Ba=function(e,t){if(ka&&"string"==typeof e)for(;t--;)e=Ea(e,xa,"");return e},Na="DOMException",_a=Oa("Error"),Pa=Oa(Na),$a=function(){Ta(this,La);var e=arguments.length,t=Da(e<1?void 0:arguments[0]),n=Da(e<2?void 0:arguments[1],"Error"),r=new Pa(t,n),o=_a(t);return o.name=Na,Ra(r,"stack",Ca(1,Ba(o.stack,1))),Fa(r,this,$a),r},La=$a.prototype=Pa.prototype,ja="stack"in _a(Na),za="stack"in new Pa(1,2),Wa=ja&&!za;Ma({global:!0,forced:Wa},{DOMException:Wa?$a:Pa});var Ua=Oa(Na),Va=Ua.prototype;if(Va.constructor!==Ua)for(var qa in Ra(Va,"constructor",Ca(1,Ua)),Aa)if(Ia(Aa,qa)){var Ha=Aa[qa],Ga=Ha.s;Ia(Ua,Ga)||Ra(Ua,Ga,Ca(6,Ha.c))}const Qa=`OS: ${nt()?`iOS ${rt().getBrowserVersion()}(Desktop Mode on iOS Safari detected, estimating version from Safari)`:`${rt().getOSName()} ${rt().getOSVersion()}`}\nBrowser version: ${rt().getBrowserName()} ${rt().getBrowserVersion()} with ${rt().getEngineName()} engine\nPlatform: ${nt()?" Tablet (Desktop Mode on iOS Safari detected)":rt().getPlatformType()}\nWeb SDK version: ${e.version.versionStr}`,Ka=10,Ya=ie("About");function Za(e){const[r,o]=t.useState(""),[i,a]=t.useState("");return n((()=>{null!==e.connection&&(o(Ja(e.connection.getServerInfo())),fetch("third-party-licenses.txt").then((e=>{const t=`Status code: ${e.status}, Status Text: ${e.statusText}`;if(Ya.debug(`Received response. ${t}`),[...e.headers.entries()].forEach((e=>Ya.debug(`Header: ${e[0]} with value: ${e[1]}`))),!e.ok)throw new Error(t);return e.text()})).then((e=>a(e))).catch((e=>Ya.warn(`Failed to fetch resource. Error: ${e}`))))}),[e.connection]),t.createElement(m,{onDismiss:e.onDismiss,visible:e.visible,size:"large",header:"About Amazon DCV",modalRoot:window.document.body,disableContentPaddings:!0,footer:t.createElement(g,{gridDefinition:[{colspan:7},{colspan:5}]},t.createElement(p,null,"Copyright © 2017-2024, NICE s.r.l. or its affiliates. All rights reserved."),t.createElement(p,{float:"right"},t.createElement(b,{external:!0,externalIconAriaLabel:"Opens in a new tab",href:"EULA.txt"},"End User License Agreement")))},t.createElement(v,{tabs:[{label:"Client",id:"about-client",content:de(t.createElement(f,{rows:Ka,readOnly:!0,value:Qa}))},{label:"Server",id:"about-server",content:de(t.createElement(f,{rows:Ka,readOnly:!0,value:r}))},{label:"Third party notices",id:"third-party-notices",content:de(t.createElement(f,{rows:Ka,readOnly:!0,value:i}))}]}))}function Ja(e,t){let n="";return Object.keys(e).forEach((r=>{"version"===r?n+=`${le(r)}: ${e[r].major}.${e[r].minor}.${e[r].revision}\n`:ce(e[r])?n+=Ja(e[r],le(r)):n+=t?`${t}-${r}: ${e[r]}\n`:`${le(r)}: ${e[r]}\n`})),n}function Xa(){return Xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xa.apply(null,arguments)}Za.propTypes={connection:c.object,visible:c.bool,onDismiss:c.func};var es=({styles:e={},...n})=>t.createElement("svg",Xa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M15 6h-5V1M1 6h5V1M1 10h5v5M15 10h-5v5M1 1l5 5M15 1l-5 5M6 10l-5 5M10 10l5 5"}));const ts=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],ns=ie("Fullscreen");function rs(e){return Boolean(e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement)}function os({setFullscreen:e,currentDocument:r}){const[o,i]=t.useState(!1),a=()=>{const t=rs(r);i(t),e(t)},s=()=>r.fullscreenEnabled||r.webkitFullscreenEnabled||r.mozFullScreenEnabled||r.msFullscreenEnabled;return n((()=>(s()&&ts.forEach((e=>r.addEventListener(e,a))),()=>{s()&&ts.forEach((e=>r.removeEventListener(e,a)))})),[r,e]),t.createElement("div",{title:"Full Screen"},t.createElement(u,H({},o?{iconSvg:t.createElement(es,null)}:{iconName:"expand"},{variant:"icon",onClick:()=>{rs(r)?(r.exitFullscreen?r.exitFullscreen():r.mozCancelFullScreen?r.mozCancelFullScreen():r.webkitExitFullscreen?r.webkitExitFullscreen():r.msExitFullscreen&&r.msExitFullscreen(),navigator?.keyboard?.unlock()):(()=>{const e=r.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen&&e.msRequestFullscreen(),navigator.permissions.query({name:"keyboard-lock"}).then((e=>{"denied"!==e?.state?(ns.info("granted"===e?.state?"Keyboard lock enabled":"Requesting permission to lock keyboard"),navigator?.keyboard?.lock().catch((()=>{}))):ns.info("Keyboard lock permission denied")})).catch((()=>{ns.debug("Keyboard-lock permission not supported by browser, defaulting to normal behaviour"),navigator?.keyboard?.lock()}))})()}})))}os.propTypes={setFullscreen:c.func,currentDocument:c.object};var is=r(os);const as=ie("Display Layout");let ss,cs,ls,ds={},us={};function ms(){return cs}function ps(e){return Fe.dynamicResolution&&ms()&&Fe.selectedResolution===Ee&&(e||ss&&ss.length>1)}function hs(e,t,n){let r,o;if(ss&&ss.length>0)1===ss.length||n?(r=ss[0].rect.width,o=ss[0].rect.height):ss.length>1&&!n&&(r=ss[1].rect.width,o=ss[1].rect.height);else{const e=t.document.getElementById("dcv-display");e?(r=e.getBoundingClientRect().width,o=e.getBoundingClientRect().height):(r=t.innerWidth,o=t.innerHeight)}ps(n)?(ds[n]&&(clearTimeout(ds[n]),ds[n]=null),ds[n]=setTimeout((()=>{!function(e,t,n){let r=vs(t),o=bs(t);r=Math.min(r,Fe.maxDisplayWidth||r),r=Math.max(r,Fe.minDisplayWidth||r),o=Math.min(o,Fe.maxDisplayHeight||o),o=Math.max(o,Fe.minDisplayHeight||o);const i=()=>{const e=e=>Math.abs(us[n].width-r)>e||Math.abs(us[n].height-o)>e;return!rs(t.document)&&!t.fullScreen||function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(us[n])||e(2)};i()?(us[n]={width:r,height:o},xs(e,r,o,n),at()&&ot()&&ys(t.document.getElementById("dcv-display-frame"),"hidden")):ys(t.document.getElementById("dcv-display-frame"),"hidden")}(e,t,n),ds[n]=null}),500)):Es(r,o,t,n)}function fs(e,t){return`${e}x${t}`}function gs(e){return e.split("x")}function bs(e){let t=0,n=e.document.getElementById("dcv-container"),r=e.document.getElementById("dcv-display-frame");return n&&r?(t=r.getBoundingClientRect().top-n.getBoundingClientRect().top,n.getBoundingClientRect().height-t):ue(e)}function vs(e){const t=e.document.getElementById("dcv-container");return t?t.getBoundingClientRect().width:e.innerWidth}function ys(e,t){e&&(e.style.overflow=t)}function ws(e){const t=e.document.getElementById("dcv-display"),n=e.document.getElementById("dcv-display-frame");t&&n&&((()=>{const r=bs(e),o=t.getBoundingClientRect().height,i=o?`${Math.max(0,(r-o)/2).toString()}px`:0;t.style.marginTop=i,n.style.height=`${r.toString()}px`})(),(()=>{const r=vs(e),o=t.getBoundingClientRect().width,i=o?`${Math.max(0,(r-o)/2).toString()}px`:0;t.style.marginLeft=i,n.style.width=`${r.toString()}px`})())}function Es(e,t,n,r){let o=1,i=1,a=1;const s=vs(n),c=bs(n);if(ws(n),ys(n.document.getElementById("dcv-display-frame"),Fe.scaleToFit?"hidden":"auto"),ps(r)||(us[r]={}),Fe.scaleToFit){if(i=s/e,a=c/t,o=Math.max(0,Math.floor(100*Math.min(1,i,a))/100),!o)return;as.info(`Requesting a display scaling factor of ${o}`),!function(e,t){const n=`scale(${e})`,r=t.getElementById("dcv-display"),o=t.getElementById("dcv-container");ls||(ls=function(){const e=window.CSS&&window.CSS.supports||window.supportsCSS;if(e&&e("( transform: scale(1) )"))return"transform";if(e&&e("( zoom: 0.8 )"))return"zoom";return"no-scale"}());if("transform"===ls)return r.style.transform=n,r.style.transformOrigin="0 0",o.style.overflow="hidden",!0;if("zoom"===ls)return r.style.zoom=e,o.style.overflow="hidden",!0;return o.style.overflow="auto",!1}(o,n.document)?as.info("CSS scaling or zoom unsupported!"):ws(n)}}function Ss(e){ss=e}function xs(e,t,n,r){let o,i,a=r?ss[0].name:ss[1].name,s=r?0:ss[0].rect.width;return ss&&ss.length>1?(o={name:a,rect:{x:s,y:0,width:t,height:n},primary:r},i=r?[o,ss[1]]:[ss[0],o],Ss(i),e.requestDisplayLayout(i)):e.requestResolution(t,n)}function ks(e){const[r,o]=t.useState(Fe.macOptionToAlt),[i,a]=t.useState(Fe.macCommandToControl),s=t=>{t?(Fe.macOptionToAlt=r,Fe.macCommandToControl=i,De(),e.connection.setKeyboardQuirks({macOptionToAlt:r,macCommandToControl:i,forceKeyboardCombinations:Fe.forceKeyboardCombinations})):(o(Fe.macOptionToAlt),a(Fe.macCommandToControl))};return n((()=>(Z.on("close-preferences",s),()=>{Z.off("close-preferences",s)})),[r,i]),t.createElement(h,{size:"xxl"},t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"Option key setting"),t.createElement(y,{onChange:({detail:e})=>o(e.value),value:r,items:[{value:!0,label:"Use Option (⌥) as remote Alt key"},{value:!1,label:"Use Option (⌥) as local modifier"}]})),t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"Command key setting"),t.createElement(y,{onChange:({detail:e})=>a(e.value),value:i,items:[{value:!0,label:"Use Command (⌘) as remote Control key"},{value:!1,label:"Use Command (⌘) as remote Meta key"}]})))}ks.propTypes={connection:c.object};const Ms={ERROR:{status:"error",color:"red",importance:3},WARNING:{status:"warning",color:"red",importance:2},SUCCESS:{status:"success",color:"green",importance:1},INFO:{status:"info",color:"blue",importance:1}};let Os=0,Cs=[];const Rs=e=>({id:Os++,level:se(e.level)?Ms.INFO:e.level,header:se(e.header)?"":e.header,description:se(e.description)?null:e.description,progress:se(e.progress)?null:e.progress,uploadedBytes:se(e.progress)?null:e.uploadedBytes,totalBytes:se(e.progress)?null:e.totalBytes,uploadedFiles:se(e.progress)?null:e.uploadedFiles,totalFiles:se(e.progress)?null:e.totalFiles,actions:se(e.actions)?{}:e.actions,timestamp:Date.now()});function Is(e,t){let n,r=Rs(e),o=-1;return se(t)||(o=Cs.findIndex((e=>e.id===t))),-1===o?n=[r].concat(Cs.map((e=>({...e})))):(n=Cs.map((e=>({...e}))),n[o]=r),Cs=n,Z.emit("notifications-update",Cs),r.id}function Ts(e){const t=Cs.map((e=>({...e}))).filter((t=>t.id!==e));Cs=t,Z.emit("notifications-update",Cs)}function Fs(e,t,n,r,o,i){if(!se(t)){const a=Cs.findIndex((e=>e.id===t));if(-1!==a){const t=Cs.map((e=>({...e})));t[a].progress=e,t[a].uploadedBytes=n,t[a].totalBytes=r,t[a].uploadedFiles=o,t[a].totalFiles=i,Cs=t,Z.emit("notifications-update",Cs)}}}const Ds=ie("UI CameraSelect");let As=null,Bs=null;function Ns(e){const[r,i]=t.useState(),[a,s]=t.useState([]),[c,l]=t.useState(),d=o(!0),m=e=>{Is({level:Ms.ERROR,header:"Error getting devices.",description:e.message,actions:{dismissable:!0}},Bs)},f=e=>{const t=[];e.filter((e=>"videoinput"===e.kind)).forEach(((e,n)=>{t.push({label:e.label||`Camera ${n+1}`,value:e.deviceId})})),s(t)},g=()=>{e.connection.getConnectedDevices().then(f).catch(m)},b=()=>{navigator.permissions.query({name:"camera"}).then((t=>{As&&(As.onchange=null),As=t,r||(t.onchange=b,g()),i(t.state),"granted"===t.state&&me(e.webcamStatus)&&g()})).catch((e=>{e instanceof TypeError?Ds.info(e.message):Ds.warn(e.message)}))},v=t=>{t?c&&(e.setWebcamId(c),Fe.selectedWebcamId=c,De()):l(Fe.selectedWebcamId)},y=()=>t.createElement(u,{iconAlign:"right",href:"https://docs.aws.amazon.com/dcv/latest/userguide/using-webcam.html",target:"_blank",iconName:"external"},"Read more");n((()=>{a.filter((t=>e.webcamId===t.value)).length?l(e.webcamId):a.length&&(l(a[0].value),e.setWebcamId(a[0].value))}),[e.webcamId,r,a]),n((()=>{e.webcamStatus&&(Ds.info(`Webcam enabled. Status: ${e.webcamStatus}`),d.current&&(b(),d.current=!1))}),[e.webcamStatus]),n((()=>(Z.on("close-preferences",v),Z.on("device-change",g),()=>{Z.off("close-preferences",v),Z.off("device-change",g)})),[e.connection,e.setWebcamId,c]);const[S,x,k,M]=(()=>{let n="",o=null,i="info",a=!0;if("busy"===e.webcamStatus)n="Camera not available. Another user is already sharing a camera within the session.",o=y(),i="warning";else switch(r){case"prompt":n="Camera not available. Grant camera permission to use it.",o=t.createElement(u,{onClick:()=>navigator.mediaDevices.getUserMedia({video:!0})},"Allow detection"),i="info";break;case"denied":n="Camera not available. Grant camera permission to use it.",o=y(),i="warning";break;case"granted":"streaming"===e.webcamStatus?(n="The selected camera cannot be changed while the streaming is active.",o=y(),i="warning"):(n="Camera available. Check the browser settings to change this site's camera permission.",o=y(),i="info",a=!1)}return[n,o,i,a]})();return t.createElement(h,{size:"l"},t.createElement(w,{action:x,type:k},S),t.createElement("div",null,t.createElement(p,null,"Camera"),t.createElement(p,{color:"text-body-secondary",fontSize:"body-s",margin:{bottom:"s"}},"Select which camera to activate."),t.createElement("div",{style:{width:"70%"}},t.createElement(E,{selectedOption:(e=>{const t=a.filter((t=>e===t.value));return t.length?t[0]:null})(c),onChange:({detail:e})=>l(e.selectedOption.value),options:a,selectedAriaLabel:"Selected",disabled:M}))))}Ns.propTypes={connection:c.object,webcamStatus:c.string,webcamId:c.string,setWebcamId:c.func};const _s=ie("Preferences");function Ps(r){const[o,i]=t.useState("general"),[a,s]=t.useState(Fe.selectedResolution),[c,l]=t.useState(Fe.metricsEnabled),[d,f]=t.useState(!1),[g,b]=t.useState(!1),[w,E]=t.useState(Fe.enableHighPixelDensity),[k,M]=t.useState(Fe.displayQuality),[O,C]=t.useState(Fe.appearanceMode),[R,I]=t.useState(Fe.toolbarBehavior),[T,F]=t.useState(260),[D,A]=t.useState(0),[B,N]=t.useState(Fe.timezoneRedirectionEnabled),_=e=>{Is({level:Ms.WARNING,header:"Timezone Redirection config error.",description:t.createElement("div",null,"Failed to ",B?"enable":"disable",".",t.createElement("br",null),"Error: ",e.message," (code: ",e.code,")"),actions:{dismissable:!0}})},P=()=>{Z.emit("close-preferences",!1),s(Fe.selectedResolution),E(Fe.enableHighPixelDensity),M(Fe.displayQuality),C(Fe.appearanceMode),I(Fe.toolbarBehavior),l(Fe.metricsEnabled),b(Fe.highColorAccuracy),N(Fe.timezoneRedirectionEnabled),r.onDismiss()};return n((()=>{r.connection&&Le("high-color-accuracy",(e=>{f(e.available),b(e.enabled),F(e.available?350:300),e.available&&(Fe.highColorAccuracy=e.enabled,De())}))}),[r.connection]),n((()=>{A(r.timezoneRedirectionSetting),r.connection&&r.timezoneRedirectionSetting===e.TimezoneRedirectionSetting.CLIENT_DECIDES&&r.connection.enableTimezoneRedirection(B).catch(_)}),[r.connection,r.timezoneRedirectionSetting]),t.createElement(m,{onDismiss:P,visible:r.visible,size:"large",header:"Preferences",modalRoot:window.document.body,disableContentPaddings:!0,footer:t.createElement(p,{float:"right"},t.createElement(h,{direction:"horizontal",size:"xs"},t.createElement(u,{variant:"link",onClick:P},"Cancel"),t.createElement(u,{variant:"primary",onClick:()=>{Z.emit("close-preferences",!0),(()=>{let e;k!==Fe.displayQuality&&(e=k===ye.label?ye:we,r.connection.setDisplayQuality(e.minQuality,e.maxQuality),_s.info(`Switching to ${k} display mode`),Fe.displayQuality=k)})(),O!==Fe.appearanceMode&&(Fe.appearanceMode=O,r.submitAppearanceModePreferences(O)),R!==Fe.toolbarBehavior&&(Fe.toolbarBehavior=R,r.submitToolbarBehaviorPreferences(R)),c!==Fe.metricsEnabled&&(Fe.metricsEnabled=c,r.submitMetricsPreferences(c)),(()=>{if(!d)return;const e=g?"enable":"disable";r.connection.requestDisplayConfig(g).catch((n=>{Is({level:Ms.WARNING,header:"Display config error.",description:t.createElement("div",null,"Failed to ",e," high color accuracy.",t.createElement("br",null),"Error: ",n.message," (code: ",n.code,")"),actions:{dismissable:!0}})}))})(),a!==Fe.selectedResolution&&(Fe.selectedResolution=a===Ee?Ee:Se,r.submitResolutionPreferences(a),s(Fe.selectedResolution)),at()&&w!==Fe.enableHighPixelDensity&&(Fe.enableHighPixelDensity=w,r.connection.enableHighPixelDensity(w)),B!==Fe.timezoneRedirectionEnabled&&(Fe.timezoneRedirectionEnabled=B,D===e.TimezoneRedirectionSetting.CLIENT_DECIDES&&r.connection.enableTimezoneRedirection(B).catch(_)),De(),r.onDismiss()}},"Save")))},t.createElement("div",{style:{height:T}},t.createElement(v,{activeTabId:o,onChange:({detail:e})=>i(e.activeTabId),tabs:[{label:"General",id:"general",content:de(t.createElement(S,{columns:2},t.createElement("div",null,t.createElement(h,{size:"xxl"},t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"Appearance"),t.createElement(y,{onChange:({detail:e})=>C(e.value),value:O,items:[...Me()?[{value:ve,label:ve+(r.systemDefaultAppearanceMode?` (${le(r.systemDefaultAppearanceMode)})`:"")}]:[],{value:ge,label:ge},{value:be,label:be}]})),D===e.TimezoneRedirectionSetting.CLIENT_DECIDES?t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"Time Zone Redirection"),t.createElement(x,{onChange:({detail:e})=>N(e.checked),checked:B},B?"Enabled":"Disabled")):null)),t.createElement("div",null,t.createElement(p,{margin:{bottom:"s"}},"Toolbar behavior"),t.createElement(y,{onChange:({detail:e})=>I(e.value),value:R,items:[{value:pe.label,label:pe.label,description:pe.description},{value:he.label,label:he.label,description:he.description},{value:fe.label,label:fe.label,description:fe.description}]}))))},{label:"Display",id:"display",content:de(t.createElement(S,{columns:2},t.createElement(h,{size:"xxl"},t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"Streaming mode"),t.createElement(y,{onChange:({detail:e})=>M(e.value),value:k,items:[{value:ye.label,label:ye.label,description:ye.description},{value:we.label,label:we.label,description:we.description}]})),d&&t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"High color accuracy (YUV 4:4:4)"),t.createElement(x,{onChange:({detail:e})=>b(e.checked),checked:g,description:"Streaming performance could be affected."},g?"Enabled":"Disabled")),t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"Streaming metrics in the toolbar"),t.createElement(x,{onChange:({detail:e})=>l(e.checked),checked:c},c?"Enabled":"Disabled"))),t.createElement(h,{size:"xxl"},at()&&t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"High pixel density"),t.createElement(x,{onChange:({detail:e})=>E(e.checked),checked:w},w?"Enabled":"Disabled")),ms()?t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"Display resolution"),t.createElement(y,{onChange:({detail:e})=>s(e.value),value:a,items:[{value:Ee,label:"Adapt automatically"},{value:Se,label:`${r.currentResolution} (Current)`},...($=r.currentResolution,xe.filter((e=>{let t=!0;if(Fe.minDisplayWidth&&(t=e.width>=Fe.minDisplayWidth),t&&Fe.maxDisplayWidth&&(t=e.width<=Fe.maxDisplayWidth),t&&Fe.minDisplayHeight&&(t=e.height>=Fe.minDisplayHeight),t&&Fe.maxDisplayWidth&&(t=e.height<=Fe.maxDisplayHeight),t){const n=gs($);e.width.toString()===n[0]&&e.height.toString()===n[1]&&(t=!1)}return t})).map((e=>({value:fs(e.width,e.height),label:fs(e.width,e.height)}))))]})):null)))},...at()?[{label:"Keyboard",id:"keyboard",content:de(t.createElement(ks,{connection:r.connection}))}]:[],...r.webcamStatus&&"not-available"!==r.webcamStatus?[{label:"Camera",id:"camera",content:de(t.createElement(Ns,{connection:r.connection,webcamStatus:r.webcamStatus,webcamId:r.webcamId,setWebcamId:r.setWebcamId}))}]:[]]})));var $}Ps.propTypes={connection:c.object,visible:c.bool,onDismiss:c.func,submitResolutionPreferences:c.func,currentResolution:c.string,submitMetricsPreferences:c.func,submitAppearanceModePreferences:c.func,submitToolbarBehaviorPreferences:c.func,webcamStatus:c.string,webcamId:c.string,setWebcamId:c.func,systemDefaultAppearanceMode:c.oneOf([P.Light,P.Dark]),timezoneRedirectionSetting:c.number};const $s=ie("DropdownMenu");let Ls;function js({connection:e,relativeMouseModeEnabled:r,sasEnabled:o,focusDisplay:i,screenshotEnabled:a,currentResolution:s,submitResolutionPreferences:c,submitMetricsPreferences:l,submitAppearanceModePreferences:d,submitToolbarBehaviorPreferences:u,webcamStatus:m,webcamId:p,setWebcamId:h,systemDefaultAppearanceMode:f,timezoneRedirectionSetting:g}){const[b,v]=t.useState(""),[y,w]=t.useState(!1),[E,S]=t.useState(!1),[x,M]=t.useState(0),[O,C]=t.useState(!1),R=n=>{switch(n){case"relativeMouseMode":navigator.permissions.query({name:"pointer-lock"}).then((t=>{"denied"!==t?.state?($s.info("granted"===t?.state?"Mouse lock enabled: enabling relative mouse":"Requesting permission to lock mouse, to enable relative mouse"),e.enterRelativeMouseMode()):($s.info("Mouse lock permission denied, couldn't enable relative mouse"),Is({level:Ms.WARNING,header:"Permissions to mouse lock was not granted.",description:"Enable mouse lock permissions and try again.",actions:{dismissable:!0}}))})).catch((()=>{$s.debug("Pointer-lock permission not supported by browser, defaulting to normal behaviour"),e.enterRelativeMouseMode()}));break;case"SAS":!function(e){e.sendKeyboardShortcut([{key:"Control",location:KeyboardEvent.DOM_KEY_LOCATION_LEFT},{key:"Alt",location:KeyboardEvent.DOM_KEY_LOCATION_LEFT},{key:"Delete",location:KeyboardEvent.DOM_KEY_LOCATION_STANDARD}])}(e),C(!0);break;case"preferences":S(!0);break;case"screenshot":!function(e){const n=e=>{$s.error(`Failed to capture screenshot: ${e.message}`),Is({level:Ms.ERROR,header:"Screenshot error",description:t.createElement("div",null,"Failed to capture screenshot.",t.createElement("br",null),"Error: ",e.message),actions:{dismissable:!0}})};Ls=setTimeout((()=>{$s.warn("No response to the screenshot request"),n({message:"Timeout"}),Ls=null}),2e4),e.getScreenshot().catch((e=>{Ls&&clearTimeout(Ls),n(e)}))}(e);break;case"aboutDCV":w(!0);break;case"disconnection":e.disconnect()}};return n((()=>{null!==e&&v(e.getServerInfo().hostname)}),[e]),n((()=>(Z.on("screenshot",Ws),()=>{Z.off("screenshot",Ws)})),[]),n((()=>{M(g)}),[g]),n((()=>{O&&(i(),C(!1))}),[O]),t.createElement("div",{title:"More"},t.createElement(k,{onItemClick:({detail:e})=>R(e.id),items:[...r?[{text:"Use relative mouse [Ctrl + Shift + F8]",id:"relativeMouseMode"}]:[],...o?[{text:"Send Ctrl + Alt + Del",id:"SAS"}]:[],...a?[{text:"Save Screenshot",id:"screenshot"}]:[],{text:"Preferences",id:"preferences"},{text:"About Amazon DCV",id:"aboutDCV"},{text:"Disconnect",id:"disconnection"}]},b),t.createElement(Za,{connection:e,visible:y,onDismiss:()=>{w(!1)}}),t.createElement(Ps,{connection:e,currentResolution:s,submitResolutionPreferences:c,visible:E,onDismiss:()=>{S(!1)},submitMetricsPreferences:l,submitAppearanceModePreferences:d,submitToolbarBehaviorPreferences:u,webcamStatus:m,webcamId:p,setWebcamId:h,systemDefaultAppearanceMode:f,timezoneRedirectionSetting:x}))}function zs(e){return btoa(function(e){let t,n=32768,r=[];for(t=0;t<e.length;t+=n)r.push(String.fromCharCode.apply(null,e.subarray(t,t+n)));return r.join("")}(new Uint8Array(e)))}function Ws(e){Ls&&clearTimeout(Ls),null!==e?($s.info("Retrieved screenshot"),Is({level:Ms.INFO,header:"Screenshot captured.",description:"Screenshot ready to be downloaded.",actions:{accept:{text:"Download",callback:()=>function(e){const t=document.createElement("a");t.href=`data: image/png;base64,${zs(e)}`,"download"in t&&(t.download="connection.png"),t.target="_blank",t.click()}(e),remove:!0},decline:{text:"Decline",remove:!0}}})):($s.warn("Failed to capture screenshot"),Is({level:Ms.ERROR,header:"Screenshot error.",description:"Failed to capture screenshot.",actions:{dismissable:!0}}))}js.propTypes={connection:c.object,relativeMouseModeEnabled:c.bool,sasEnabled:c.bool,focusDisplay:c.func,screenshotEnabled:c.bool,currentResolution:c.string,submitResolutionPreferences:c.func,submitMetricsPreferences:c.func,submitAppearanceModePreferences:c.func,submitToolbarBehaviorPreferences:c.func,webcamStatus:c.string,webcamId:c.string,setWebcamId:c.func,systemDefaultAppearanceMode:c.oneOf([P.Light,P.Dark]),timezoneRedirectionSetting:c.number};var Us=r(js);function Vs(){return Vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vs.apply(null,arguments)}var qs=({styles:e={},...n})=>t.createElement("svg",Vs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("rect",{x:"4",y:"1",width:"4",height:"8",rx:"2"}),t.createElement("path",{d:"M1 6v1a5 5 0 008 4M6 12v3M1 15h10M15.12 5.75l-4.5 4.5M15.12 10.25l-4.5-4.5"}));const Hs=ie("Microphone");function Gs({connection:e}){const[r,a]=i(Fe.microphone),s=o(!1),c=t=>{s.current=t,a(t),Fe.microphone=t,De(),e.setMicrophone(t).catch((e=>{const n=`Failed to ${t?"enable":"disable"} microphone.`;Hs.warn(`${n} Disabling microphone. Error (code: ${e.code}): ${e.message}`),Fe.microphone=t,De(),Is({level:Ms.ERROR,header:"Microphone error.",description:n,actions:{dismissable:!0}})})).finally((()=>{s.current=!1,Hs.info("[Audio] Setting microphone to "+(Fe.microphone?"enabled":"disabled"))}))};return n((()=>{c(Fe.microphone)}),[e]),t.createElement("div",{title:"Microphone"},t.createElement(u,H({},r?{iconName:"microphone"}:{iconSvg:t.createElement(qs,null)},{variant:"icon",onClick:()=>{s.current||c(!Fe.microphone)}})))}Gs.propTypes={connection:c.object};var Qs=r(Gs);function Ks(){return Ks=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ks.apply(null,arguments)}var Ys=({styles:e={},...n})=>t.createElement("svg",Ks({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M7 15V1L1 6v4l6 5zM15.01 5.75l-4.5 4.5M15.01 10.25l-4.5-4.5"}));function Zs(){return Zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zs.apply(null,arguments)}var Js=({styles:e={},...n})=>t.createElement("svg",Zs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M7 15V1L1 6v4l6 5zM11 5v6"}));function Xs(){return Xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xs.apply(null,arguments)}var ec=({styles:e={},...n})=>t.createElement("svg",Xs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M7 15V1L1 6v4l6 5zM15 3v10M11 5v6"}));const tc=ie("Audio");function nc({connection:e}){const[n,r]=t.useState(Fe.volume),[o,i]=t.useState(Fe.volume),a=t=>{r(t),Fe.volume=t,De(),e.setVolume(t),tc.debug(`Client volume level set to ${t}`)};return t.createElement(l,{position:"bottom",size:"large",triggerType:"custom",header:"Volume",dismissButton:!1,content:t.createElement(h,{direction:"horizontal",size:"s"},t.createElement(u,{iconSvg:rc(n),variant:"icon",onClick:()=>{a(n?0:o)}}),t.createElement("input",{type:"range",style:{verticalAlign:"middle",width:"150px",height:"100%"},orient:"horizontal",min:"0",max:"100",step:"1",value:o,onChange:e=>{return t=Number(e.target.value),i(t),void a(t);var t}}),t.createElement("div",{style:{display:"flex",width:"3ch",textAlign:"center",alignItems:"center",justifyContent:"center",height:"100%"}},t.createElement("output",null,o)))},t.createElement("div",{title:"Audio"},t.createElement(u,{iconSvg:rc(n),variant:"icon"})))}function rc(e){return e<=0?t.createElement(Ys,null):e<=50?t.createElement(Js,null):t.createElement(ec,null)}nc.propTypes={connection:c.object};var oc=r(nc);function ic(e){return e<1e3?`${e.toFixed(1)} bps`:e<1e6?`${(e/1e3).toFixed(1)} kbps`:`${(e/1e6).toFixed(1)} Mbps`}const ac=({label:e,color:n,children:r})=>t.createElement("div",null,t.createElement(p,{margin:{bottom:"xxxs"}},t.createElement(h,{direction:"horizontal",size:"xxs"},n&&t.createElement(sc,{color:n}),t.createElement(p,{color:"text-label"},e))),t.createElement("div",null,r));ac.propTypes={label:c.string,color:c.string,children:c.node};const sc=({color:e})=>t.createElement("svg",{width:"12",height:"12"},t.createElement("rect",{width:"12",height:"12",style:{fill:e,strokeWidth:"1",stroke:"rgb(0,0,0)"}}));sc.propTypes={color:c.string};let cc=null,lc=[];function dc({connection:e}){const[r,i]=t.useState(0),[s,c]=t.useState(0),[l,d]=t.useState(0),[f,v]=t.useState(""),[y,w]=t.useState(""),[E,S]=t.useState([]),[x,k]=t.useState(!1),C=o();C.current=x;const R=()=>{const t=e.getStats();let n,r,o=0;if(lc.length>60){for(n=[],r=0;r<lc.length-1;r++)n.push(lc[r]);lc=n}for(0===lc.length?lc.push({x:0,y:t.traffic}):(lc.forEach((e=>{e.x++})),lc.unshift({x:0,y:t.traffic})),r=0;r<lc.length;r++)o+=lc[r].y;o/=lc.length,C.current&&(S(lc),i(t.traffic),c(o),d(t.peakTraffic)),v(t.latency>999?"> 1 s":`${Math.round(t.latency)} ms`),w(`${t.fps} fps`),cc=setTimeout(R,1e3)},I=a((()=>{k(!0)}),[]);n((()=>(null!==e&&R(),()=>{clearTimeout(cc)})),[e]);const T=()=>t.createElement("div",{title:"Metrics"},t.createElement(u,{variant:"link",onClick:I},t.createElement(h,{direction:"horizontal",size:"m"},t.createElement(p,{fontWeight:"bold",color:"inherit"},y),t.createElement(p,{fontWeight:"bold",color:"inherit"},f))));return t.createElement("div",null,t.createElement(T,null),x&&t.createElement(m,{onDismiss:()=>{k(!1)},visible:x,size:"medium",header:"Streaming metrics",footer:t.createElement(g,{gridDefinition:[{colspan:4},{colspan:4},{colspan:4}]},t.createElement(ac,{label:"Current usage",color:j},ic(r)),t.createElement(ac,{label:"Average usage",color:z},ic(s)),t.createElement(ac,{label:"Peak usage",color:W},ic(l)))},t.createElement(h,{size:"xl"},t.createElement(g,{gridDefinition:[{colspan:6},{colspan:6}]},t.createElement(ac,{label:"Framerate"},y),t.createElement(ac,{label:"Network latency"},f)),t.createElement(M,{variant:"h3",actions:t.createElement(b,{external:!0,externalIconAriaLabel:"Opens in a new tab",href:"https://docs.aws.amazon.com/dcv/latest/userguide/using-streaming.html#using-streaming-metrics"},"Learn more")},"Download bandwidth"),t.createElement(O,{series:[{title:"Current usage",type:"line",data:E,color:j,valueFormatter:ic},{title:"Average usage",type:"threshold",y:s,color:z,valueFormatter:ic},...E.some((e=>e.y>=.8*l))?[{title:"Peak usage",type:"threshold",y:l,color:W,valueFormatter:ic}]:[]],i18nStrings:{xTickFormatter:e=>`${e} s`,yTickFormatter:ic},xDomain:[60,0],hideFilter:!0,hideLegend:!0,ariaLabel:"Single data series line chart",height:200,empty:t.createElement(p,{textAlign:"center",color:"inherit"},t.createElement("b",null,"No data available"),t.createElement(p,{variant:"p",color:"inherit"},"There is no data available"))}))))}dc.propTypes={connection:c.object};var uc=r(dc);function mc(){return mc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mc.apply(null,arguments)}var pc=({styles:e={},...n})=>t.createElement("svg",mc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M8 12v3M3 15h10"}),t.createElement("circle",{cx:"8",cy:"6.56",r:"5.38"}),t.createElement("path",{d:"M10.25 4.25l-4.5 4.5M10.25 8.75l-4.5-4.5"}));function hc(){return hc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hc.apply(null,arguments)}var fc=({styles:e={},...n})=>t.createElement("svg",hc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M8 12v3M3 15h10"}),t.createElement("circle",{cx:"8",cy:"6.56",r:"5.38"}),t.createElement("path",{d:"M5 6.5h6"}));function gc(){return gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gc.apply(null,arguments)}var bc=({styles:e={},...n})=>t.createElement("svg",gc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M8 12v3M3 15h10"}),t.createElement("circle",{cx:"8",cy:"6.56",r:"5.38"}),t.createElement("circle",{cx:"8",cy:"6.5",r:"2"}));const vc=ie("Webcam");function yc({connection:e,status:r,selectedWebcam:i,setSelectedWebcam:a}){const s=o(!1),c=o(!1),l=t=>{Fe.webcam=t,c.current?vc.debug(`Cannot set camera to ${t?"enabled":"disabled"} as a request is already in progress`):(c.current=!0,vc.info("Setting camera to "+(t?"enabled":"disabled")),e.setWebcam(t,i).then((e=>{t&&a(e)})).catch((e=>{const n=`Failed to ${t?"enable":"disable"} camera.`;vc.warn(`${n} Disabling camera. Error (code: ${e.code}): ${e.message}`),Is({level:Ms.ERROR,header:"Camera error.",description:n,actions:{dismissable:!0}})})).finally((()=>{c.current=!1})))},d=()=>{l(!Fe.webcam)};return n((()=>{"attached"===r&&(d(),s.current=!0)}),[i]),n((()=>{"available"===r&&s.current&&(d(),s.current=!1)}),[r]),n((()=>{l(Fe.webcam)}),[e]),t.createElement("div",{title:"Camera"},t.createElement(u,{iconSvg:wc(r),variant:"icon",onClick:d}))}function wc(e){switch(e){case"available":return t.createElement(pc,null);case"attached":return t.createElement(fc,null);case"streaming":return t.createElement(bc,null);default:throw new Error(`Illegal camera serviceStatus: ${e}`)}}yc.propTypes={connection:c.object,status:c.string,selectedWebcam:c.string,setSelectedWebcam:c.func};var Ec=r(yc);function Sc(){return Sc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sc.apply(null,arguments)}var xc=({styles:e={},...n})=>t.createElement("svg",Sc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M14 6.5l-3-3-3 3M11 4v10M8 9.5l-3 3-3-3M5 2v10"}));const kc=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}),Mc={text:"Storage",href:null},Oc=1024,Cc=2,Rc=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],Ic=ie("Filestorage");let Tc,Fc=!1;function Dc({connection:e,downloadEnabled:r,uploadEnabled:i}){const[s,c]=t.useState(!1),l=o(!1),[d,f]=t.useState(!0),[g,v]=t.useState(!1),[y,w]=t.useState([]),[E,S]=t.useState([Mc]),[x,M]=t.useState(1),[O,D]=t.useState(Mc.href),A=o(Mc.href),[B,N]=t.useState([]),[_,P]=t.useState(""),[$,L]=t.useState(""),[j,z]=t.useState(!1),[W,U]=t.useState(!1),[V,q]=t.useState(!1),H=o(null),G=o(null),Q=o(null),K=()=>Math.max(5,Math.floor((window.innerHeight-320-86)/42)),Y=()=>B.slice((x-1)*K(),x*K()),J=(e,n)=>t.createElement("div",{style:{display:"flex",alignItems:"center",height:"100%"}},t.createElement(T,{name:e}),n&&t.createElement("span",{style:{marginLeft:"5px"}},n)),X=e=>{let n,r=e&&"/"!==e&&"Storage"!==e?e:"",o=[];Ic.debug(`Changing to directory ${r}`),n=Tc.list(r),n.on("error",(e=>{1===e.code||2===e.code?Ic.info(`Aborted listing of ${r} folder`):(Ic.warn(`Failed to list ${r} folder (${e.message})`),Is({level:Ms.ERROR,header:"File storage error.",description:t.createElement("div",null,"Failed to list files in ",r," folder.",t.createElement("br",null),"Error: ",e.message," (code: ",e.code,")"),actions:{dismissable:!0}}),X())})).on("success",(()=>{Ic.debug("List files succeeded"),N(o),e!==O&&w([]),(e=>{let t=e.split("/"),n=[Mc],r="";t.filter((e=>""!==e)).forEach((e=>{r+=`/${e}`,n.push({text:e,path:r,href:null})})),S(n),D(e),A.current=e,M(1)})(r)})).on("newItems",(e=>{Ic.debug(`New items ${e.length}`),Ic.debug(`update list folders ${O}`),o.push(...e)})).run()},ee=()=>{Fc?X(O):X()},te=()=>{c(!0),e.getFileExplorer().then((t=>{Tc=t,ee(),e.setUploadBandwidth(102400)})).catch((()=>{f(!1)}))},ne=()=>{l.current=!1,c(!1),e.setUploadBandwidth(10240),Fc=!1,q(!1)},re=(e,n)=>{let r,o,i=n||""===n?n:O;o=Is({level:Ms.INFO,header:"Upload in progress.",description:`File ${e.name} is uploading to Storage ${O}`,progress:0,actions:{decline:{text:"Stop uploading",callback:()=>r.cancel(),remove:!0}}}),r=Tc.storeFile(e,i),r.on("error",(n=>{1!==n.code&&Is({level:Ms.ERROR,header:"Upload error.",description:t.createElement("div",null,"Failed to upload ",e.name," to Storage",i,".",t.createElement("br",null),"Error: ",n.message," (code: ",n.code,")"),actions:{dismissable:!0}},o)})).on("progress",((e,t)=>{Fs(Math.floor(100*e/t),o)})).on("success",(()=>{Is({level:Ms.SUCCESS,header:"File uploaded.",description:`File ${e.name} successfully uploaded to Storage${O}`,actions:{dismissable:!0}},o),Fc=!0,ee()})).run()},oe=e=>{const t=e.target.files;t&&t.length>0?(Ic.debug("A file to upload has been selected."),re(t[0])):Ic.debug("No file to upload has been selected.")},ie=e=>{Tc.retrieveFile(e).on("error",(n=>{Is({level:Ms.ERROR,header:"Download error.",description:t.createElement("div",null,"Impossible to download file ",e,".",t.createElement("br",null),"Error: ",n.message," (code: ",n.code,")"),actions:{dismissable:!0}})})).on("success",(()=>{Is({level:Ms.SUCCESS,header:"File ready for download.",description:`File ${e} ready to be downloaded to your device.`,actions:{dismissable:!0}})})).run()},ae=()=>{_.length>0&&_!==$&&((()=>{let e,n="folder"===y[0].type,r=y[0].displayName,o=`${O}/${r}`,i=`${O}/${_}`;e=n?Tc.renameDirectory(o,i):Tc.renameFile(o,i),e.on("error",(e=>{Is({level:Ms.ERROR,header:"Rename error.",description:t.createElement("div",null,"Failed to rename ",(n?"folder ":"file ")+r," to ",_,".",t.createElement("br",null),"Error: ",e.message," (code: ",e.code,")"),actions:{dismissable:!0}})})).on("success",(()=>{Ic.debug("Rename succeeded."),Is({level:Ms.SUCCESS,header:(n?"Folder":"File")+" renamed.",description:`${n?"Folder":"File"} successfully renamed from ${r} to ${_}.`,actions:{dismissable:!0}}),Fc=!0,ee()})).run()})(),w([])),U(!1),P("")},se=()=>{const e=B.map((e=>({...e})));e.shift(),N(e)},ce=()=>{var e;_.length>0?Tc.createDirectory(e||`${O}/${_}`).on("error",(e=>{se(),Is({level:Ms.ERROR,header:"Folder creation error.",description:t.createElement("div",null,"Failed to create folder ",_,".",t.createElement("br",null),"Error: ",e.message," (code: ",e.code,")"),actions:{dismissable:!0}})})).on("success",(()=>{Ic.debug("Mkdir succeeded"),Is({level:Ms.SUCCESS,header:"Folder created.",description:`Folder ${_} successfully created.`,actions:{dismissable:!0}}),Fc=!0,ee()})).run():se(),z(!1),P("")},le=e=>{for(const t of e)if("file"!==t.kind)return!1;return!0},de=e=>{Fc=!0,!ot()&&!s&&i&&le(e.dataTransfer.items)&&(l.current=!0,te())},ue=a((e=>{e.stopPropagation(),!e.relatedTarget&&l.current&&s&&ne()})),me=e=>{switch(e){case"download":ie(`${O}/${y[0].displayName}`);break;case"open":X(`${O}/${y[0].displayName}`);break;case"rename":L(y[0].displayName),P(y[0].displayName),U(!0);break;case"delete":Tc.deleteFile(`${O}/${y[0].displayName}`).on("error",(e=>{Is({level:Ms.ERROR,header:"Deletion error.",description:t.createElement("div",null,"Failed to delete file ",y[0].displayName,".",t.createElement("br",null),"Error: ",e.message," (code: ",e.code,")"),actions:{dismissable:!0}})})).on("success",(()=>{Ic.debug("Remove succeeded"),Is({level:Ms.SUCCESS,header:"File deleted.",description:`File ${y[0].displayName} successfully deleted.`,actions:{dismissable:!0}}),Fc=!0,ee()})).run();break;default:Ic.warn("Invalid dropdown action selected")}},pe=e=>t.createElement(u,{onClick:()=>e.current.click()},t.createElement("input",{style:{display:"none"},type:"file",ref:e,onChange:oe,onClick:e=>{e.target.value=""}}),"Upload file"),he=t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},t.createElement(h,{direction:"horizontal",size:"s"},t.createElement(k,{disabled:!y.length,onItemClick:({detail:e})=>me(e.id),items:[...r?[{text:"Download",id:"download",disabled:y.length&&"file"!==y[0].type}]:[],{text:"Rename",id:"rename",disabled:y.length&&!Y().filter((e=>e.displayName===y[0].displayName)).length}]},"Actions"),i&&pe(H),t.createElement(u,{onClick:()=>{N([{displayName:null,type:"folder"}].concat(B.map((e=>({...e}))))),w([]),z(!0),M(1)}},"Create folder")),t.createElement(C,{currentPageIndex:x,onChange:({detail:e})=>M(e.currentPageIndex),pagesCount:Math.ceil(B.length/K()),ariaLabels:{nextPageLabel:"Next page",previousPageLabel:"Previous page",pageLabel:e=>`Page ${e}`}})),fe=[{id:"name",header:"Name",cell:function(e){return J(e.type,(e=>{const n=(e,n)=>t.createElement(F,{ref:Q,onChange:({detail:e})=>P(e.value),onBlur:e,onKeyUp:({detail:t})=>{13===t.keyCode&&e()},value:_,placeholder:n,disableBrowserAutocorrect:!0,inputMode:"text"});return W&&e.displayName===y[0].displayName?n(ae,e.displayName):j&&null===e.displayName?n(ce,"New folder"):"file"===e.type?r?t.createElement(b,{ariaLabel:"Download",onFollow:()=>ie(`${O}/${e.displayName}`)},e.displayName):e.displayName:t.createElement(b,{ariaLabel:"Open",onFollow:g?()=>{}:()=>{X(`${O}/${e.displayName}`)}},e.displayName)})(e))},minWidth:380},{id:"lastModified",header:"Last modified",cell:function(e){return t.createElement(p,{variant:"p"},e.displayName&&e.lastModified?kc.format(new Date(e.lastModified)):"-")},minWidth:180},{id:"size",header:"Size",cell:function(e){return t.createElement(p,{variant:"p"},"file"===e.type?Ac(e.size):"-")},minWidth:140}],ge=e=>{r&&(Ic.debug("Asking to download resource"),e.accept())};return n((()=>()=>{Fc=!1,Tc=null}),[]),n((()=>{(W||j)&&(Q.current.focus(),W&&Q.current.select())}),[W,j]),n((()=>(Z.on("file-download",ge),()=>{Z.off("file-download",ge)})),[r]),n((()=>(window.addEventListener("dragenter",de),window.addEventListener("dragleave",ue),()=>{window.removeEventListener("dragenter",de),window.removeEventListener("dragleave",ue)}))),t.createElement("div",null,t.createElement("div",{title:"Filestorage"},t.createElement(u,{variant:"icon",iconSvg:t.createElement(xc,null),onClick:te})),t.createElement(m,{onDismiss:ne,visible:s,header:"File storage",size:"large",modalRoot:window.document.body},d?t.createElement("div",{onDragEnter:e=>q(!ot()&&le(e.dataTransfer.items))},t.createElement(p,{margin:{bottom:"xs"},padding:{bottom:"xs"}},t.createElement(h,{size:"xxs"},t.createElement(h,{direction:"horizontal",size:"s"},J("folder-open",""),t.createElement(R,{items:E,onClick:g?()=>{}:({detail:e})=>X(e.item.path)})),t.createElement("div",{style:{height:42*K()+86,position:"relative"}},t.createElement(I,{resizableColumns:!0,loadingText:"Loading resources",selectionType:"single",columnDefinitions:fe,items:Y(),selectedItems:y,onSelectionChange:({detail:e})=>w(e.selectedItems),header:he,empty:t.createElement(p,{textAlign:"center",color:"inherit",variant:"h5",margin:"m"},i&&!ot()?t.createElement(t.Fragment,null,t.createElement("p",null,"Drag and drop a file to upload"),t.createElement("p",null," Or "),pe(G)):t.createElement("p",null,"Folder ",E[E.length-1].text," is empty"))}),V&&i&&t.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",position:"absolute",alignItems:"center",bottom:"0px",width:"100%",height:42*K(),opacity:"0.8",outline:"2px",border:"2px dashed gray",backgroundColor:"white"},onDrop:e=>{e.preventDefault(),q(!1),((e,n)=>{if(!e[0])return void Ic.debug("Dropped file is null");const r=e[0].webkitGetAsEntry()||e[0].getAsEntry();if(r)if(r.isFile&&1===e.length)r.file((e=>{e.name.startsWith(".")||re(e,n)}),(()=>Ic.debug(`File not retrieved: ${r.name}`)));else{v(!0);const r=Tc.uploadFiles(e,n),o=Is({level:Ms.INFO,header:"Upload of dropped files in progress.",description:`Dropped files are uploading to Storage${n}`,progress:0,actions:{decline:{text:"Stop uploading",callback:()=>{r.cancel(),v(!1)},remove:!0}}});let i=0;r.on("error",(e=>{1!==e.code&&(Is({level:Ms.ERROR,header:"Upload dropped files error.",description:t.createElement("div",null,"Failed to upload dropped files",t.createElement("br",null),"Error: ",e.message," ",e.code?`(code: ${e.code})`:""),actions:{dismissable:!0}},o),v(!1))})).on("progress",((e,t,n,r,a,s,{destinationFolder:c,isDirectory:l})=>{Fs(Math.floor(e/t*100),o,e,t,n,r),A.current===c&&(l||n>i)&&X(c),i=n})).on("success",(()=>{Is({level:Ms.SUCCESS,header:"Dropped files uploaded.",description:`Dropped files successfully uploaded to Storage${n}`,actions:{dismissable:!0}},o),v(!1)})).run()}else Ic.debug("Dropped file is null")})(e.dataTransfer.items,O||"")},onDragOver:e=>e.preventDefault(),onDragLeave:()=>q(!1)},t.createElement(p,{textAlign:"center",color:"inherit",variant:"h5"},"Drag and drop your files to start uploading")))))):t.createElement(p,{textAlign:"center",color:"inherit",variant:"h5"},"File storage is not available")))}function Ac(e){if(se(e))return"-";if(0===e)return`0 ${Rc[0]}`;const t=Math.floor(Math.log(e)/Math.log(Oc));return`${parseFloat((e/Math.pow(Oc,t)).toFixed(Cc))} ${Rc[t]}`}Dc.propTypes={connection:c.object,downloadEnabled:c.bool,uploadEnabled:c.bool};var Bc=r(Dc);const Nc=1e3,_c={MINUTE:60};_c.HOUR=_c.MINUTE**2,_c.DAY=24*_c.HOUR;const Pc=(e,t)=>Math.floor(e/t),$c={just_now:{limit:10,updateInterval:1,text:e=>"now"},less_than_min:{limit:_c.MINUTE,updateInterval:1,text:e=>"< 1m ago"},n_min_ago:{limit:_c.HOUR,updateInterval:30,text:e=>`${Pc(e,_c.MINUTE)}m ago`},n_hours_ago:{limit:_c.DAY,updateInterval:15*_c.MINUTE,text:e=>`${Pc(e,_c.HOUR)}h ago`},n_days_ago:{text:e=>`${Pc(e,_c.DAY)}d ago`}};function Lc(){const[e,r]=t.useState([]),o=e=>function(e,t,n){return Number.isFinite(e)&&e>=t&&e<=n}(e,0,100)?t.createElement(B,{value:e}):null;return n((()=>{const e=e=>r(Array.isArray(e)?e:[]);return Z.on("notifications-update",e),()=>{Z.off("notifications-update",e)}}),[]),t.createElement(l,{position:"bottom",size:"medium",fixedWidth:!0,triggerType:"custom",dismissButton:!1,content:e.length?t.createElement("div",{style:{maxHeight:Math.floor(.8*window.innerHeight),overflow:"auto"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"2px 0"}},t.createElement(p,{fontSize:"heading-s",fontWeight:"normal",variant:"h2"},"Notifications"),t.createElement(u,{onClick:()=>{e.forEach((e=>{e.actions&&(e.actions.decline&&("function"==typeof e.actions.decline.callback&&e.actions.decline.callback(),e.actions.decline.remove&&Ts(e.id)),e.actions.dismissable&&Ts(e.id))}))}},"Clear all")),Object.values(Ms).map((e=>e.importance)).sort(((e,t)=>t-e)).filter(((e,t,n)=>!t||e!==n[t-1])).map((n=>e.filter((e=>e.level.importance===n)).map((e=>t.createElement(p,{margin:{horizontal:"xxxs",vertical:"m"},key:e.id},t.createElement(D,null,t.createElement(p,null,(e=>{const n=t.createElement(d,{type:e.level.status},e.header||le(e.level.status));return"dismissable"in e.actions?t.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n,t.createElement("div",{style:{paddingLeft:"10px"}},t.createElement(u,{variant:"icon",iconName:"close",iconAlign:"right",onClick:()=>Ts(e.id)}))):n})(e)),e.timestamp&&t.createElement(zc,{timestamp:e.timestamp}),e.description&&t.createElement(p,{margin:{top:"xxs"}},e.description),e.uploadedFiles&&t.createElement(p,{margin:{top:"s"}},`Files uploaded: ${e.uploadedFiles} / ${e.totalFiles} `),e.uploadedBytes&&t.createElement(p,{margin:{top:"s"}},`Bytes uploaded: ${Ac(e.uploadedBytes)} / ${Ac(e.totalBytes)}`),null!==e.progress&&t.createElement(p,{margin:{top:"s"}},o(e.progress)),("decline"in e.actions||"accept"in e.actions)&&t.createElement(p,{margin:{top:"s"}},(e=>{const n=Object.keys(e.actions).filter((e=>-1!==["accept","decline"].indexOf(e))).length,r=1===n?"flex-start":"space-between";return t.createElement("div",{style:{display:"flex",justifyContent:r}},"decline"in e.actions&&t.createElement(u,{onClick:()=>{"function"==typeof e.actions.decline.callback&&e.actions.decline.callback(),e.actions.decline.remove&&Ts(e.id)}},e.actions.decline.text),"accept"in e.actions&&t.createElement("div",null,t.createElement(u,{variant:"primary",onClick:()=>{"function"==typeof e.actions.accept.callback&&e.actions.accept.callback(),e.actions.accept.remove&&Ts(e.id)}},e.actions.accept.text)))})(e))))))))):t.createElement(p,{padding:{horizontal:"xxl",vertical:"m"},variant:"p",color:"text-status-inactive",textAlign:"center"},"No notifications to display")},t.createElement("div",{title:"Notifications"},t.createElement(A,{color:(()=>{let t="grey",n=-1;return e.forEach((e=>{e.level.importance>n&&(n=e.level.importance,t=e.level.color)})),t})()},e.length)))}var jc=r(Lc);function zc(e){const[r,o]=t.useState((Date.now()-e.timestamp)/Nc),i=e=>Object.values($c).find((t=>!("limit"in t)||e<t.limit)),a=e=>{o((Date.now()-e)/Nc)};return n((()=>{const t=i(r).updateInterval;let n=null;return t&&(n=setInterval(a,t*Nc,e.timestamp)),()=>{n&&(clearInterval(n),n=null)}}),[]),t.createElement(p,{variant:"small",textAlign:"right",display:"block",fontWeight:"light"},i(s=r).text(s));var s}function Wc(){return Wc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wc.apply(null,arguments)}zc.propTypes={timestamp:c.number};var Uc=({styles:e={},...n})=>t.createElement("svg",Wc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},n),t.createElement("g",{stroke:"#545b64",strokeWidth:"2"},t.createElement("path",{d:"M12 8h0a3 3 0 013 3v3.14a.86.86 0 01-.86.86H9.86a.86.86 0 01-.86-.86V11a3 3 0 013-3z",strokeLinejoin:"round",fill:"none"}),t.createElement("circle",{cx:"12",cy:"3.5",r:"2.5",strokeMiterlimit:"10",fill:"none"}),t.createElement("circle",{cx:"4",cy:"3.5",r:"2.5",fill:"#545b64",strokeMiterlimit:"10"}),t.createElement("path",{d:"M4 8h0a3 3 0 013 3v3.14a.86.86 0 01-.86.86H1.86a.86.86 0 01-.86-.86V11a3 3 0 013-3z",fill:"#545b64",strokeLinejoin:"round"})));function Vc(){return Vc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vc.apply(null,arguments)}var qc=({styles:e={},...n})=>t.createElement("svg",Vc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},n),t.createElement("g",{fill:"none",stroke:"#545b64",strokeWidth:"2"},t.createElement("circle",{cx:"8",cy:"3.5",r:"2.5",strokeMiterlimit:"10"}),t.createElement("path",{d:"M8 8h0a3 3 0 013 3v3.14a.86.86 0 01-.86.86H5.86a.86.86 0 01-.86-.86V11a3 3 0 013-3z",strokeLinejoin:"round"})));let Hc=[];const Gc=e=>{Hc=[];const t=e.length;for(let r=0;r<t;r++){const t=Hc.find((t=>t.username===e[r].username));t?t.connectionIds.push(e[r].connectionId):Hc.push({username:(n=e[r]).username,connectionIds:[n.connectionId],owner:n.owner})}var n;Hc.sort(((e,t)=>e.username<t.username?-1:1))},Qc=e=>{Z.emit("collaboration-status-update",e.length>1)},Kc=e=>{if(0!==Hc.length){const t=e.map((e=>e.connectionId)),n=Hc.map((e=>e.connectionIds)).flat();(e=>{let t,n;e.forEach((e=>{const r=Hc.find((t=>t.connectionIds.includes(e)));n=r.owner?"Session owner":"Collaborator",t=`${n} '${r.username}' has disconnected from this session.`,Is({level:Ms.INFO,header:"Client disconnected.",description:t,actions:{dismissable:!0}})}))})(n.filter((e=>!t.some((t=>e===t)))));const r=e.filter((e=>!n.some((t=>e.connectionId===t))));(e=>{let t,n;e.forEach((e=>{n=e.owner?"Session owner":"Collaborator",t=`${n} '${e.username}' has joined this session.`,Is({level:Ms.INFO,header:"New client connected.",description:t,actions:{dismissable:!0}})}))})(r)}};function Yc(){Z.emit("collaborator-list-update",Hc)}function Zc(e,t){t.forEach((t=>{t!==e.id&&e.disconnectCollaborator(t)}))}function Jc({connection:e}){const[r,o]=t.useState([]),[i,a]=t.useState(!1);return n((()=>{const t=t=>{a(t.some((t=>t.owner&&t.connectionIds.includes(e.id)))),o(t)};return Z.on("collaborator-list-update",t),Yc(),()=>{Z.off("collaborator-list-update",t)}}),[]),t.createElement(l,{position:"bottom",size:"medium",triggerType:"custom",dismissButton:!1,content:r.length?t.createElement("div",{style:{maxHeight:Math.floor(.8*window.innerHeight),overflow:"auto"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"2px 0 15px"}},t.createElement(p,{fontSize:"heading-s",fontWeight:"normal",variant:"h2"},"Collaborators"),i&&r.length>2&&t.createElement("div",{style:{marginLeft:"30px"}},t.createElement(u,{onClick:()=>function(e){Hc.forEach((t=>Zc(e,t.connectionIds)))}(e)},"Disconnect all"))),t.createElement(D,null,r.map((n=>n.username&&(n=>{const r=n.connectionIds.length>1&&n.connectionIds.includes(e.id)||i&&n.connectionIds.includes(e.id)&&n.connectionIds.length>1||i&&!n.connectionIds.includes(e.id);return t.createElement(p,{key:n.username},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",minWidth:"150px"}},t.createElement("div",{style:{display:"flex",alignItems:"center"}},t.createElement(T,{svg:t.createElement(qc,null),size:"small"}),t.createElement("div",{style:{maxWidth:"200px"}},t.createElement(p,{fontSize:"body-m",fontWeight:"normal",variant:"p",margin:{left:"xs",right:"s"}},`${n.username}${n.connectionIds.length>1?` (${n.connectionIds.length} clients)`:""}`))),r&&t.createElement(u,{variant:"icon",iconName:"close",onClick:()=>Zc(e,n.connectionIds)})))})(n))))):t.createElement(p,{padding:{horizontal:"xxl",vertical:"m"},variant:"p",color:"text-status-inactive",textAlign:"center"},"No collaborators to display")},t.createElement("div",{title:"Collaborators"},t.createElement(T,{svg:t.createElement(Uc,null)})))}Jc.propTypes={connection:c.object};var Xc=r(Jc);function el(){return el=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},el.apply(null,arguments)}var tl=({styles:e={},...n})=>t.createElement("svg",el({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M1 2h14v12H1zM4 11h8M4 5h2M7 5h2M10 5h2M4 8h2M7 8h2M10 8h2"}));const nl="soft-kbd-div";let rl;function ol({connection:e}){const[r,o]=t.useState(!1),i=()=>{o(!0),rl.focus(),(st()||nt())&&(rl.click(),window.scrollTo(0,0),document.body.scrollTop=0,document.scrollingElement.scrollTop=0)},a=()=>{rl=document.getElementById("dcv-softkbd-hid-input"),rl&&i()},s=()=>{const e=document.createElement("input");e.setAttribute("id","dcv-softkbd-hid-input"),e.setAttribute("type","text"),e.style.caretColor="transparent",e.style.color="transparent",e.style.background="transparent",e.style.border="none",e.style.fontSize="1pt",e.style.height="1px",e.style.width="1px",e.value="",rl=e};return n((()=>{var t;return r&&(t=e.sendKeyboardEvent.bind(e),rl=document.getElementById("dcv-softkbd-hid-input"),rl&&(rl.addEventListener("focusout",a),rl.addEventListener("keydown",t),rl.addEventListener("keyup",t),rl.addEventListener("keypress",t))),()=>(e=>{rl=document.getElementById("dcv-softkbd-hid-input"),rl&&(rl.removeEventListener("focusout",a),rl.removeEventListener("keydown",e),rl.removeEventListener("keyup",e),rl.removeEventListener("keypress",e))})(e.sendKeyboardEvent.bind(e))}),[e,r]),n((()=>(s(),()=>{rl=null,o(!1)})),[]),t.createElement("div",{title:"Virtual keyboard"},t.createElement(u,{iconSvg:t.createElement(tl,null),variant:"icon",onClick:()=>{r?(rl=document.getElementById("dcv-softkbd-hid-input"),rl&&(rl.blur(),document.getElementById(nl).removeChild(rl)),o(!1)):(rl=document.getElementById("dcv-softkbd-hid-input"),rl||s(),document.getElementById(nl).appendChild(rl),i())}}))}ol.propTypes={connection:c.object};var il=r(ol);function al(e,t){return al=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},al(e,t)}function sl(e){return sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sl(e)}function cl(e,t){if(t&&("object"===sl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ll(e){return ll=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ll(e)}var dl,ul,ml,pl,hl={exports:{}};function fl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ll(e);if(t){var o=ll(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cl(this,n)}}hl.exports=function(){if(pl)return ml;pl=1;var e=ul?dl:(ul=1,dl="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function t(){}function n(){}return n.resetWarningCache=t,ml=function(){function r(t,n,r,o,i,a){if(a!==e){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function o(){return r}r.isRequired=r;var i={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i}}()();var gl,bl,vl,yl=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&al(e,t)}(r,t.PureComponent);var e,n=fl(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,e)).container=null,t.window=null,t.windowCheckerInterval=null,t.released=!1,t.state={mounted:!1},t}return(e=[{key:"render",value:function(){return this.state.mounted?G.createPortal(this.props.children,this.container):null}},{key:"componentDidMount",value:function(){this.window||this.container||(this.openChild(),this.setState({mounted:!0}))}},{key:"openChild",value:function(){var e,t=this,n=this.props,r=n.url,o=n.title,i=n.name,a=n.features,s=n.onBlock,c=n.onOpen,l=n.center;if("string"!=typeof l||void 0!==a.width&&void 0!==a.height){if("parent"===l)a.left=window.top.outerWidth/2+window.top.screenX-a.width/2,a.top=window.top.outerHeight/2+window.top.screenY-a.height/2;else if("screen"===l){var d=void 0!==window.screenLeft?window.screenLeft:window.screen.left,u=void 0!==window.screenTop?window.screenTop:window.screen.top,m=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,p=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height;a.left=m/2-a.width/2+d,a.top=p/2-a.height/2+u}}else console.warn("width and height window features must be present when a center prop is provided");if(this.window=window.open(r,i,(e=a,Object.keys(e).reduce((function(t,n){var r=e[n];return"boolean"==typeof r?t.push("".concat(n,"=").concat(r?"yes":"no")):t.push("".concat(n,"=").concat(r)),t}),[]).join(","))),this.container=this.window.document.createElement("div"),this.windowCheckerInterval=setInterval((function(){t.window&&!t.window.closed||t.release()}),50),this.window){if(this.window.document.title=o,this.container=this.window.document.getElementById("new-window-container"),null===this.container)this.container=this.window.document.createElement("div"),this.container.setAttribute("id","new-window-container"),this.window.document.body.appendChild(this.container);else{var h=this.window.document.getElementById("new-window-container-static");this.window.document.body.removeChild(h)}this.props.copyStyles&&setTimeout((function(){return e=document,n=t.window.document,r=n.createDocumentFragment(),Array.from(e.styleSheets).forEach((function(e){var t;try{t=e.cssRules}catch(e){console.error(e)}if(t){var o=[];Array.from(e.cssRules).forEach((function(e){var t=e.type;if(t!==CSSRule.UNKNOWN_RULE){var n;n=t===CSSRule.KEYFRAMES_RULE?function(e){var t=["@keyframes",e.name,"{"];return Array.from(e.cssRules).forEach((function(e){t.push(e.keyText,"{",e.style.cssText,"}")})),t.push("}"),t.join(" ")}(e):[CSSRule.IMPORT_RULE,CSSRule.FONT_FACE_RULE].includes(t)?function(e){return e.cssText.split("url(").map((function(e){return"/"===e[1]?"".concat(e.slice(0,1)).concat(window.location.origin).concat(e.slice(1)):e})).join("url(")}(e):e.cssText,o.push(n)}}));var i=n.createElement("style");i.textContent=o.join("\n"),r.appendChild(i)}else if(e.href){var a=n.createElement("link");a.rel="stylesheet",a.href=e.href,r.appendChild(a)}})),void n.head.appendChild(r);var e,n,r}),0),"function"==typeof c&&c(this.window),this.window.addEventListener("beforeunload",(function(){return t.release()}))}else"function"==typeof s?s(null):console.warn("A new window could not be opened. Maybe it was blocked.")}},{key:"componentWillUnmount",value:function(){if(this.state.mounted&&this.window)if(this.props.closeOnUnmount)this.window.close();else if(this.props.children){var e=this.container.cloneNode(!0);e.setAttribute("id","new-window-container-static"),this.window.document.body.appendChild(e)}}},{key:"release",value:function(){if(!this.released){this.released=!0,clearInterval(this.windowCheckerInterval);var e=this.props.onUnload;"function"==typeof e&&e(null)}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(r.prototype,e),r}();function wl(){return wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wl.apply(null,arguments)}vl={url:"",name:"",title:"",features:{width:"600px",height:"640px"},onBlock:null,onOpen:null,onUnload:null,center:"parent",copyStyles:!0,closeOnUnmount:!0},(bl="defaultProps")in(gl=yl)?Object.defineProperty(gl,bl,{value:vl,enumerable:!0,configurable:!0,writable:!0}):gl[bl]=vl,yl.propTypes={children:hl.exports.node,url:hl.exports.string,name:hl.exports.string,title:hl.exports.string,features:hl.exports.object,onUnload:hl.exports.func,onBlock:hl.exports.func,onOpen:hl.exports.func,center:hl.exports.oneOf(["parent","screen"]),copyStyles:hl.exports.bool,closeOnUnmount:hl.exports.bool};var El=({styles:e={},...n})=>t.createElement("svg",wl({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M5.5 12v3M.5 15h10M1 5h9v7H1z"}),t.createElement("path",{d:"M5 4V1h9v7h-4"}));function Sl(){return Sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sl.apply(null,arguments)}var xl=({styles:e={},...n})=>t.createElement("svg",Sl({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M5.5 12v3M.5 15h10M5 1h9v7H5z"}),t.createElement("path",{d:"M5 5H1v7h9V8M11.75 2.25l-4.5 4.5M11.75 6.75l-4.5-4.5"}));const kl=ie("Multiscreen");function Ml({connection:e,copyEnabled:r,pasteEnabled:o,appearanceMode:i,toolbarBehavior:a,pendingDisplays:s}){const[c,l]=t.useState(!1),[d,m]=t.useState(null),p=()=>{Z.emit("close-secondary-display")},h=()=>{const t=Ul();l(!1),t&&e&&(Wl(null),e.detachDisplay(t)),d&&!d.closed&&(d.close(),m(null))};return n((()=>(Z.on("close-secondary-display",h),()=>{Z.off("close-secondary-display",h)})),[d,e]),t.createElement(t.Fragment,null,t.createElement("div",{title:"Multiple screens"},t.createElement(u,{iconSvg:c?t.createElement(xl,null):t.createElement(El,null),variant:"icon",onClick:()=>{c?h():l(!0)}})),c&&t.createElement(yl,{features:{height:window.innerHeight,width:window.innerWidth},name:"DCV Secondary Window",title:`${e.getServerInfo().hostname} - Amazon DCV`,onUnload:p,onBlock:p,onOpen:t=>{t.opener=null,m(t),Z.once("open-secondary-display",(()=>(t=>{t?s.length?(Wl(s[0]),e.attachDisplay(t,{displayDivName:"dcv-display",displayId:s[0]}).then((e=>Wl(e))).catch((e=>{kl.error(`Cannot open secondary display (Error: ${e.code} ${e.message})`),h()}))):e.attachDisplay(t,{displayDivName:"dcv-display"}).then((e=>Wl(e))).catch((e=>{kl.error(`Cannot open secondary display (Error: ${e.code} ${e.message})`),h()})):h()})(t)))},closeOnUnmount:!0},t.createElement(Vl,{isPrimary:!1,connection:e,copyEnabled:r,pasteEnabled:o,window:d,appearanceMode:i,toolbarBehavior:a})))}Ml.propTypes={connection:c.object,copyEnabled:c.bool,pasteEnabled:c.bool,appearanceMode:c.oneOf([ve,ge,be]),toolbarBehavior:c.oneOf([pe.label,he.label,fe.label]),pendingDisplays:c.arrayOf(c.number)};var Ol=r(Ml);const Cl=ie("Viewer"),Rl={position:"relative",margin:"auto",outline:"none"},Il={height:"100%",overflow:"hidden",position:"relative"},Tl={position:"absolute",width:"100%",zIndex:1e3,pointerEvents:"all"},Fl={display:"flex",flexFlow:"row wrap",alignItems:"center","--gap":"32px",marginLeft:"calc(var(--gap) / -2)",marginBottom:"calc(var(--gap) / -2)"},Dl={marginLeft:"calc(var(--gap) / 2)",marginBottom:"calc(var(--gap) / 2)"};let Al,Bl,Nl=[],_l=null,Pl=null;function $l({isPrimary:r,connection:i,copyEnabled:c,pasteEnabled:l,window:d,appearanceMode:u,toolbarBehavior:m,uiConfig:f}){const[g,b]=t.useState(!0),[v,y]=t.useState(!1),[E,S]=t.useState(!1),[x,k]=t.useState(!1),[M,O]=t.useState(""),[C,R]=t.useState(""),[I,T]=t.useState(""),[F,D]=t.useState(""),[A,B]=t.useState(Fe.selectedWebcamId),[_,j]=t.useState(c||!1),[z,W]=t.useState(!1),[H,G]=t.useState(l||!1),[Q,K]=t.useState(Fe.metricsEnabled),[Y,J]=t.useState(!1),[X,ee]=t.useState(!1),[te,ne]=t.useState(!1),[re,oe]=t.useState(!1),[ae,le]=t.useState(!1),[de,fe]=t.useState(!1),[ge,be]=t.useState(!1),[ye,we]=t.useState(!1),[xe,ke]=t.useState(null),[Me,Ie]=t.useState(Fe.appearanceMode),[Te,_e]=t.useState(Fe.toolbarBehavior),[Pe,$e]=t.useState(0),[je,ze]=t.useState(""),[We,Ue]=t.useState(!1),[Ve,qe]=t.useState(!1),He=o(null),Ge=o(null),Qe=a((e=>!f||!ce(f.toolbar)||!(e in f.toolbar)||f.toolbar[e]),[f]),Ke=()=>{hs(i,d,r)},Ye=e=>{Cl.info(`network interruption alert: ${e}`),Ue(e)},Ze=e=>{Cl.info(`network offline alert: ${e}`),qe(e)},Je=(e,t,n)=>{(se(n)||0===n)&&(y(t),i.setDisplayQuality(Fe.minQuality,Fe.maxQuality),i.setMaxDisplayResolution(Fe.maxDisplayWidth,Fe.maxDisplayHeight),i.setMinDisplayResolution(Fe.minDisplayWidth,Fe.minDisplayHeight),cs=e,i.setKeyboardQuirks({macOptionToAlt:Fe.macOptionToAlt,macCommandToControl:Fe.macCommandToControl,forceKeyboardCombinations:Fe.forceKeyboardCombinations})),r||Al?(be(!0),we(!0)):Cl.info(`Received first frame for an unknown displayId: ${n}`)},Xe=t=>{$e(t.setting);const n=t.status;n&&je!==n&&(ze(n),n===e.TimezoneRedirectionStatus.PERMISSION_ERROR?Is({level:Ms.WARNING,header:"Time Zone Redirection.",description:"This user does not have permission to perform this operation.",actions:{dismissable:!0}}):n===e.TimezoneRedirectionStatus.GENERIC_ERROR&&Is({level:Ms.WARNING,header:"Time Zone Redirection.",description:"The setting could not be saved. Please try again.",actions:{dismissable:!0}}))},et=(e,t,n)=>{const o=r||se(n)||1===n.length?e:n[1].rect.width,i=r||se(n)||1===n.length?t:n[1].rect.height;Ss(n),-1!==[Ee,Se].indexOf(Fe.selectedResolution)?O(fs(o,i)):O(Fe.selectedResolution),Es(o,i,d,r)},nt=a((e=>{!function(e,t,n,r){if(t===Ee)Fe.dynamicResolution=!0,hs(e,n,r);else if(Fe.dynamicResolution=!1,t!==Se){const n=gs(t);xs(e,n[0],n[1],r)}De()}(i,e,d,r)}),[i,d,r]),rt=e=>{R(e.remote),"busy"===e.remote?_l=Is({level:Ms.WARNING,header:"Audio input unavailable.",description:"This browser or session does not support audio input.",actions:{dismissable:!0}},_l):jl()},ot=e=>{T(e.remote),e.enabled?null!==Pl&&(Ts(Pl),Pl=null):(Pl=Is({level:Ms.WARNING,header:"Audio output unavailable.",description:"This browser or session does not support audio output.",actions:{dismissable:!0}},Pl),jl())},at=e=>{D(e.serviceStatus)},st=({message:e,code:n})=>{Is({level:Ms.ERROR,header:"Webcam error.",description:t.createElement("div",null,"Webcam could not be attached.",t.createElement("br",null),"Error: ",e," (code: ",n,")"),actions:{dismissable:!0}})},ct=e=>{j(e.enabled)},lt=e=>{G(e.enabled)},dt=e=>{y(e.enabled)},ut=e=>{ee(e.enabled)},mt=e=>{ne(e.enabled)},pt=e=>{k(e.enabled)},ht=e=>{const t=e.currentTarget.getBoundingClientRect();e.clientY===t.top&&(be(!0),d.document.getElementById("dcv-display").blur())},ft=()=>{be(!1)},gt=()=>{Ge.current=setTimeout((()=>{be(!1)}),1500)},bt=()=>{clearTimeout(Ge.current)},vt=a((()=>{He.current?.focus()}),[He]),wt=e=>{fe(e)},Et=e=>{if(!e.enabled){const e=d.document.getElementById("dcv-softkbd-hid-input");e&&d.document.getElementById("soft-kbd-div").removeChild(e)}oe(e.enabled)},St=e=>{ke(e.matches?P.Dark:P.Light),Me===ve&&Ce(e,d.document.body)},xt=(e,t)=>{const n=Nl.indexOf(e);t.closed?(-1!==n&&Nl.splice(n,1),e===Bl&&Z.emit("close-secondary-display")):t.enabled?Al=e===Bl:-1===n&&Nl.push(e)};n((()=>$(L.Compact,d.document.body)),[d]),n((()=>(r&&Z.on("filestorage-enabled",J),()=>{r&&Z.off("filestorage-enabled",J)})),[r]),n((()=>(i&&(Z.on("first-frame",Je),Z.on("network-quality-warning",Ye),Z.on("network-quality-critical",Ze),r?(!function(e){Ae=ie("Feature Handler"),Be=e}(i),Z.on("display-availability",xt),Le("audio-in",rt),Le("audio-out",ot),Le("webcam",at),Le("webcam-error",st),Le("clipboard-copy",ct),Le("clipboard-paste",lt),Le("relative-mouse",dt),Le("file-download",ut),Le("file-upload",mt),Le("display-multi",(e=>le(e.enabled&&!it()&&!tt()))),Le("keyboard-sas",(e=>S(e.enabled))),Le("screenshot",pt),Le("timezone-redirection",Xe)):Z.emit("open-secondary-display")),()=>{Z.off("first-frame",Je),Z.off("network-quality-warning",Ye),Z.off("network-quality-critical",Ze),r&&(Z.off("display-availability",xt),Ne={})})),[i,r]),n((()=>{if(!g){const e=()=>hs(i,d,r);if(Al&&Nl.length){const t=Nl.indexOf(Bl);-1!==t&&Nl.splice(t,1),setTimeout(e,500)}else r&&Ss([{name:"",rect:{x:0,y:0,width:800,height:600},primary:!1}]),e()}}),[g]),n((()=>(Z.on("collaboration-status-update",W),()=>{Z.off("collaboration-status-update",W)}))),n((()=>(Z.on("display-layout",et),()=>{Z.off("display-layout",et)})),[Te,i,d,r]),n((()=>{i&&(it()||tt())&&Le("keyboard",Et)}),[i,d]),n((()=>{const e=()=>{Z.emit("close-secondary-display"),i&&i.disconnect()};return r&&d.addEventListener("pagehide",e),()=>{r&&d.removeEventListener("pagehide",e)}}),[i,d,r]),n((()=>(ye&&(d.addEventListener("resize",Ke),de&&Te===he.label||Te===pe.label?(d.document.getElementById("dcv-container")&&d.document.getElementById("dcv-container").addEventListener("mousemove",ht),d.document.getElementById("dcv-display")&&d.document.getElementById("dcv-display").addEventListener("focusin",ft),d.document.getElementById("dcv-toolbar-container")&&(d.document.getElementById("dcv-toolbar-container").addEventListener("mouseleave",gt),d.document.getElementById("dcv-toolbar-container").addEventListener("mousemove",bt)),be(!1)):(clearTimeout(Ge.current),be(!0)),b(!1)),()=>{d.removeEventListener("resize",Ke),d.document.getElementById("dcv-container")&&d.document.getElementById("dcv-container").removeEventListener("mousemove",ht),d.document.getElementById("dcv-display")&&d.document.getElementById("dcv-display").removeEventListener("focusin",ft),d.document.getElementById("dcv-toolbar-container")&&(d.document.getElementById("dcv-toolbar-container").removeEventListener("mouseleave",gt),d.document.getElementById("dcv-toolbar-container").removeEventListener("mousemove",bt))})),[ye,Te,de,i,r,d]),n((()=>{g&&!ge||hs(i,d,r)}),[Te,de]),n((()=>{const e=Oe();return Re(Me,d.document.body),e&&(ke(e.matches?P.Dark:P.Light),e.addEventListener("change",St)),()=>{e&&e.removeEventListener("change",St)}}),[Me]),n((()=>{u&&Ie(u)}),[u]),n((()=>{m&&_e(m)}),[m]);const kt=s((()=>t.createElement(h,{direction:"horizontal",size:"m"},r&&Y&&t.createElement(Bc,{connection:i,downloadEnabled:X,uploadEnabled:te}),(_||H)&&t.createElement(yt,{connection:i,copyEnabled:_,pasteEnabled:H,currentWindow:d}),r&&Ll(C)&&Ll(I)&&t.createElement(Qs,{connection:i}),r&&Ll(I)&&t.createElement(oc,{connection:i}),r&&me(F)&&t.createElement(Ec,{connection:i,status:F,selectedWebcam:A,setSelectedWebcam:B}),r&&ae&&Qe("multimonitorButton")&&t.createElement(Ol,{connection:i,copyEnabled:_,pasteEnabled:H,appearanceMode:Me,toolbarBehavior:Te,pendingDisplays:Nl}),Qe("fullscreenButton")&&t.createElement(is,{setFullscreen:wt,currentDocument:d.document}))),[r,Y,i,X,te,_,H,C,I,F,A,B,ae,_,H,Me,Te,Nl,wt,Qe,d]),Mt=s((()=>t.createElement(p,{textAlign:"center"},t.createElement(uc,{connection:i}))),[i]),Ot=s((()=>t.createElement(p,{float:"right"},t.createElement("div",{style:Fl},r&&re&&zl(t.createElement(il,{connection:i})),r&&z&&zl(t.createElement(Xc,{connection:i})),zl(t.createElement(jc,null)),zl(t.createElement(Us,{connection:i,relativeMouseModeEnabled:v,sasEnabled:E,focusDisplay:vt,screenshotEnabled:x,currentResolution:M,submitResolutionPreferences:nt,submitMetricsPreferences:K,submitAppearanceModePreferences:Ie,submitToolbarBehaviorPreferences:_e,webcamStatus:F,webcamId:A,setWebcamId:B,systemDefaultAppearanceMode:xe,timezoneRedirectionSetting:Pe}))))),[r,re,i,z,v,E,x,M,F,A,xe,Pe]),Ct=s((()=>t.createElement(p,{display:ge?"block":"none",padding:{left:"s",right:"s",top:"xs",bottom:"xs"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},kt,r&&Q&&Mt,r&&Ot))),[ge,kt,r,Q,Mt,Ot]),Rt=s((()=>t.createElement("div",{id:"dcv-toolbar-container",style:{backgroundColor:U,borderBottom:`1px solid ${V}`,...Te===pe.label||de&&Te===he.label?Tl:{}}},Ct)),[Te,de,Ct]),It=s((()=>t.createElement("div",{style:{backgroundColor:q}},t.createElement("div",{style:{height:ue(d)-1}},t.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",WebkitTransform:"translate(-50%, -50%)",msTransform:"translate(-50%, -50%)"}},t.createElement(h,{size:"m"},t.createElement(p,{textAlign:"center"},t.createElement(N,{size:"large"})),t.createElement(p,{fontWeight:"light",variant:"h1"},"Connecting")))))),[d]),Tt=s((()=>t.createElement("div",{style:{display:We?"block":"none",zIndex:"1009",position:"absolute",top:"4%",left:"50%",transform:"translate(-50%, -50%)",WebkitTransform:"translate(-50%, -50%)",msTransform:"translate(-50%, -50%)"}},t.createElement(w,{type:"warning",header:"Network connection is unstable"},"Please check your network connection or VPN."))),[d,We]),Ft=s((()=>t.createElement("div",{style:{display:Ve?"block":"none",zIndex:"1009",position:"absolute",top:"4%",left:"50%",transform:"translate(-50%, -50%)",WebkitTransform:"translate(-50%, -50%)",msTransform:"translate(-50%, -50%)"}},t.createElement(w,{type:"error",header:"Network connection is not available"},"Please check your network connection or VPN."))),[d,Ve]);return t.createElement("div",{id:"dcv-container",style:Il},g&&!ge?It:Qe("visible")&&Rt,Tt,Ft,t.createElement("div",{style:{display:g&&!ge?"none":"block",backgroundColor:q}},t.createElement("div",{id:"dcv-display-frame",style:{height:bs(d),width:vs(d),overflow:Fe.scaleToFit?"hidden":"auto"}},t.createElement("div",{id:"dcv-display",ref:He,style:Rl})),t.createElement("div",{id:"dcv-resource",tabIndex:"-1"}),t.createElement("div",{id:"soft-kbd-div",style:{position:"absolute",top:0,zIndex:-1e3}})))}function Ll(e){return-1!==["available","active"].indexOf(e)}function jl(){null!==_l&&(Ts(_l),_l=null)}function zl(e){return t.createElement("div",{style:Dl},e)}function Wl(e){if(null===e){const e=Nl.indexOf(Bl);-1!==e&&Nl.splice(e,1)}Bl=e}function Ul(){return Bl}$l.propTypes={isPrimary:c.bool,connection:c.object,copyEnabled:c.bool,pasteEnabled:c.bool,window:c.object,appearanceMode:c.oneOf([ve,ge,be]),toolbarBehavior:c.oneOf([pe.label,he.label,fe.label]),uiConfig:c.exact({toolbar:c.exact({visible:c.bool,fullscreenButton:c.bool,multimonitorButton:c.bool})})};var Vl=r($l);const ql=ie("License Handler");let Hl=null;function Gl(e){let t=365,n="",r={};e.licenses.forEach((e=>{e.isDemo&&ql.info(`License status: product '${e.product}' is using a demo license (${e.leftDays} days left)`),e.leftDays>0&&e.leftDays<t&&(t=e.leftDays,n=e.product)})),0===e.numUnlicensed?(ql.debug(`License status: ${e.licenses.length} products licensed`),r.level=Ms.INFO,"demo"===e.licensingMode&&t<7?r.header="DCV demo license.":r.header="DCV license.",t<7?(ql.info(`License status: product '${n}' will expire in ${t} days`),r.description=`License of '${n}' will expire in ${t} days.`):"demo"===e.licensingMode&&(r.description="DCV is running with a demo license.")):(ql.warn(`License error (mode: ${e.licensingMode}), ${e.numUnlicensed}/${e.licenses.length} products unlicensed: ${JSON.stringify(e.licenses)}`),r.header="No license available.","ec2"===e.licensingMode?(r.level=Ms.WARNING,r.description="Please, check your EC2 configuration.",null!==e.documentationUrl&&""!==e.documentationUrl&&(r.actions={},r.actions.accept={text:"See documentation",callback:()=>{const t=document.createElement("a");t.href=e.documentationUrl,t.target="_blank",t.click()}})):(r.level=Ms.ERROR,r.description="Please, contact the administrator.")),r.description&&(Hl=Is(r,Hl))}const Ql=ie("Printer");function Kl(e){Is({level:Ms.INFO,header:"File printed.",description:`${e.id} has been converted in printable format.`,actions:{accept:{text:"Download",callback:()=>{return t=e,Ql.debug(`Accepting print resource ${t.id}`),void t.accept({disposition:"attachment"});var t},remove:!0},decline:{text:"Decline",callback:()=>{return t=e,Ql.debug(`Removing print resource ${t.id}`),void t.decline();var t},remove:!0}}}),Ql.debug(`Added printer notification for resource ${e.id}`)}const Yl=ie("DCVViewer");let Zl,Jl;function Xl(r){const[i,a]=t.useState(null),s=o(i),c=e=>{ae(r.dcv.onDisconnect)&&r.dcv.onDisconnect(e),s.current=null},l=e=>{let t,n=`${se(e.namespace)?"":`${e.namespace}::`}${e.name}`;0!==Fe.customChannels.length&&-1!==(()=>{const t=[];return Fe.customChannels.forEach((n=>{if(se(e.namespace)){const e=n.split("::",2);t.push(e[e.length-1])}else t.push(n)})),t})().indexOf(n)?i.openChannel(e.name,e.authToken,{onMessageReceived:e=>{Yl.info(`Custom channel: received message ${new TextDecoder("utf-8").decode(e)}`),t(e)},onClose:e=>Yl.info(`Custom channel closed: ${JSON.stringify(e)}`)},e.namespace).then((e=>{Yl.info(`Opened custom channel ${e.channelName}`),t=t=>{e.sendMessage(t).then((()=>{Yl.info("Success sending message.")})).catch((e=>{Yl.error(`Failed to send message: ${JSON.stringify(e)}`)}))}})).catch((e=>{Yl.error(`Failed to open custom channel: ${e.message}`)})):Yl.info(`Custom channel '${n}' not supported`)},d=()=>{Yl.info("Calling client.connect"),e.connect({url:r.dcv.serverUrl,sessionId:r.dcv.sessionId,authToken:r.dcv.authToken,enabledChannels:Fe.enabledChannels,displayCodecs:Fe.displayCodecs,divId:"dcv-display",showDebugLayer:Fe.debugLayer,enableGraphicsDebugLayer:Fe.enableGraphicsDebugLayer,clientHiDpiScaling:Fe.clientHiDpiScaling,enableHighPixelDensity:Fe.enableHighPixelDensity,enableWebCodecs:Fe.enableWebCodecs,highColorAccuracy:Fe.highColorAccuracy,losslessColorspace:Fe.losslessColorspace,baseUrl:r.dcv.baseUrl,resourceBaseUrl:r.dcv.resourceBaseUrl||"",extensionData:r.dcv.extensionData||"",volumeLevel:Fe.volume,audioBitrate:Fe.audioBitrate,fingerRadius:Fe.fingerRadius,clipboardAutoSync:!0,dynamicAudioTuning:!0,observers:{displayLayout:(e,t,n)=>{Z.emit("display-layout",e,t,n)},firstFrame:(e,t,n)=>{Z.emit("first-frame",e,t,n)},displayAvailability:(e,t)=>{Z.emit("display-availability",e,t)},disconnect:c,licenseNotification:Gl,idleWarningNotification:e=>{!function(e){let t;e?(t=`DCV connection is idle and is going to be disconnected at ${e.toString()}`,Yl.info(t),Zl=Is({level:Ms.WARNING,header:"Idle timeout.",description:t,actions:{dismissable:!0}},Zl)):Zl&&(Ts(Zl),Zl=null)}(e)},dataChannel:e=>{Z.emit("custom-channel",e)},filePrinted:e=>{Kl(e)},fileDownload:e=>{Z.emit("file-download",e)},qualityIndicatorState:e=>{Yl.info(`Quality Indicators: ${JSON.stringify(e)}`),function(e){let n=0,r=[],o="Quality status update.";switch(e.indicators.forEach((e=>{r.push(t.createElement(p,{key:e.name},`${e.name.replace("_"," ")} status: ${e.status}`)),e.changed&&Yl.info(`Indicator ${e.name} has changed to status ${e.status}`),e.status>n&&(n=e.status)})),Yl.info(`Current Quality Indicator overall alarm state: ${n}`),n){case 1:Jl=Is({level:Ms.WARNING,header:o,description:r,actions:{dismissable:!0}},Jl);break;case 2:Jl=Is({level:Ms.ERROR,header:o,description:r,actions:{dismissable:!0}},Jl);break;default:Jl&&(Ts(Jl),Jl=null)}}(e)},filestorageEnabled:e=>{Z.emit("filestorage-enabled",e)},clipboardEvent:e=>{Z.emit("clipboard",e)},deviceChangeEvent:function(){Z.emit("device-change")},featuresUpdate:$e,screenshot:e=>{Z.emit("screenshot",e)},collaboratorList:e=>{var t;Qc(t=e),Kc(t),Gc(t),Yc()},networkQualityChange:e=>{!function(e){switch(Yl.info(`Network Quality Change: ${e.quality}`),e.quality){case"WARNING":ed("network-quality-warning");break;case"CRITICAL":ed("network-quality-critical");break;default:ed()}}(e)}}}).then((e=>{a(e),s.current=e,document.title=`${e.getServerInfo().hostname} - Amazon DCV`})).catch((e=>{Yl.error(`client.connect was rejected (${e.message})`),ae(r.dcv.onDisconnect)&&r.dcv.onDisconnect(e.message),s.current=null}))};return n((()=>{r.dcv.sessionId&&r.dcv.authToken&&!i&&(ne.setLevel(r.dcv.logLevel),d())}),[r.dcv.sessionId,r.dcv.authToken]),n((()=>()=>{Yl.info("Calling connection.disconnect"),s.current&&s.current.disconnect()}),[]),n((()=>(Z.on("custom-channel",l),()=>{Z.off("custom-channel",l)})),[i]),t.createElement(Vl,{isPrimary:!0,connection:i,window:window,uiConfig:r.uiConfig})}function ed(e=""){switch(Z.emit("network-quality-warning",!1),Z.emit("network-quality-critical",!1),e){case"network-quality-warning":case"network-quality-critical":Z.emit(e,!0);break;case"":break;default:Yl.warn(`Unknown input passed to emitNetworkQualitySignal: ${e}`)}}Xl.propTypes={dcv:c.exact({sessionId:c.string.isRequired,authToken:c.string.isRequired,serverUrl:c.string.isRequired,baseUrl:c.string.isRequired,resourceBaseUrl:c.string,extensionData:c.string,onDisconnect:c.func,logLevel:c.oneOf(Object.values(ne.levels))}).isRequired,uiConfig:c.exact({toolbar:c.exact({visible:c.bool,fullscreenButton:c.bool,multimonitorButton:c.bool})})};export{Xl as DCVViewer};
